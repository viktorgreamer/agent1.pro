!function(e){"function"==typeof define&&define.amd?define(e):window.purl=e()}(function(){function e(e,t){for(var n=decodeURI(e),o=m[t?"strict":"loose"].exec(n),i={attr:{},param:{},seg:{}},a=14;a--;)i.attr[h[a]]=o[a]||"";return i.param.query=r(i.attr.query),i.param.fragment=r(i.attr.fragment),i.seg.path=i.attr.path.replace(/^\/+|\/+$/g,"").split("/"),i.seg.fragment=i.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),i.attr.base=i.attr.host?(i.attr.protocol?i.attr.protocol+"://"+i.attr.host:i.attr.host)+(i.attr.port?":"+i.attr.port:""):"",i}function t(e){var t=e.tagName;return void 0!==t?p[t.toLowerCase()]:t}function n(e,t){if(0===e[t].length)return e[t]={};var n={};for(var o in e[t])n[o]=e[t][o];return e[t]=n,n}function o(e,t,i,r){var a=e.shift();if(a){var s=t[i]=t[i]||[];"]"==a?u(s)?""!==r&&s.push(r):"object"==typeof s?s[d(s).length]=r:s=t[i]=[t[i],r]:~a.indexOf("]")?(a=a.substr(0,a.length-1),!v.test(a)&&u(s)&&(s=n(t,i)),o(e,s,a,r)):(!v.test(a)&&u(s)&&(s=n(t,i)),o(e,s,a,r))}else u(t[i])?t[i].push(r):"object"==typeof t[i]?t[i]=r:void 0===t[i]?t[i]=r:t[i]=[t[i],r]}function i(e,t,n){if(~t.indexOf("]"))o(t.split("["),e,"base",n);else{if(!v.test(t)&&u(e.base)){var i={};for(var r in e.base)i[r]=e.base[r];e.base=i}""!==t&&a(e.base,t,n)}return e}function r(e){return c(String(e).split(/&|;/),function(e,t){try{t=decodeURIComponent(t.replace(/\+/g," "))}catch(e){}var n=t.indexOf("="),o=s(t),r=t.substr(0,o||n),a=t.substr(o||n,t.length);return a=a.substr(a.indexOf("=")+1,a.length),""===r&&(r=t,a=""),i(e,r,a)},{base:{}}).base}function a(e,t,n){var o=e[t];void 0===o?e[t]=n:u(o)?o.push(n):e[t]=[o,n]}function s(e){for(var t,n,o=e.length,i=0;i<o;++i)if("]"==(n=e[i])&&(t=!1),"["==n&&(t=!0),"="==n&&!t)return i}function c(e,t){for(var n=0,o=e.length>>0,i=arguments[2];n<o;)n in e&&(i=t.call(void 0,i,e[n],n,e)),++n;return i}function u(e){return"[object Array]"===Object.prototype.toString.call(e)}function d(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function l(t,n){return 1===arguments.length&&!0===t&&(n=!0,t=void 0),n=n||!1,t=t||window.location.toString(),{data:e(t,n),attr:function(e){return void 0!==(e=f[e]||e)?this.data.attr[e]:this.data.attr},param:function(e){return void 0!==e?this.data.param.query[e]:this.data.param.query},fparam:function(e){return void 0!==e?this.data.param.fragment[e]:this.data.param.fragment},segment:function(e){return void 0===e?this.data.seg.path:(e=e<0?this.data.seg.path.length+e:e-1,this.data.seg.path[e])},fsegment:function(e){return void 0===e?this.data.seg.fragment:(e=e<0?this.data.seg.fragment.length+e:e-1,this.data.seg.fragment[e])}}}var p={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},h=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],f={anchor:"fragment"},m={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},v=/^[0-9]+$/;return l.jQuery=function(e){null!=e&&(e.fn.url=function(n){var o="";return this.length&&(o=e(this).attr(t(this[0]))||""),l(o,n)},e.url=l)},l.jQuery(window.jQuery),l}),function(e,t){function n(){j=E=C=H=x=L=q}function o(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function i(e){return parseFloat(e)||0}function r(){P={top:t.pageYOffset,left:t.pageXOffset}}function a(){if(t.pageXOffset!=P.left)return r(),void C();t.pageYOffset!=P.top&&(r(),c())}function s(e){setTimeout(function(){t.pageYOffset!=P.top&&(P.top=t.pageYOffset,c())},0)}function c(){for(var e=_.length-1;e>=0;e--)u(_[e])}function u(e){if(e.inited){var t=P.top<=e.limit.start?0:P.top>=e.limit.end?2:1;e.mode!=t&&m(e,t)}}function d(){for(var e=_.length-1;e>=0;e--)if(_[e].inited){var t=Math.abs(b(_[e].clone)-_[e].docOffsetTop),n=Math.abs(_[e].parent.node.offsetHeight-_[e].parent.height);if(t>=2||n>=2)return!1}return!0}function l(e){isNaN(parseFloat(e.computed.top))||e.isCell||"none"==e.computed.display||(e.inited=!0,e.clone||v(e),"absolute"!=e.parent.computed.position&&"relative"!=e.parent.computed.position&&(e.parent.node.style.position="relative"),u(e),e.parent.height=e.parent.node.offsetHeight,e.docOffsetTop=b(e.clone))}function p(e){var t=!0;e.clone&&g(e),o(e.node.style,e.css);for(var n=_.length-1;n>=0;n--)if(_[n].node!==e.node&&_[n].parent.node===e.parent.node){t=!1;break}t&&(e.parent.node.style.position=e.parent.css.position),e.mode=-1}function h(){for(var e=_.length-1;e>=0;e--)l(_[e])}function f(){for(var e=_.length-1;e>=0;e--)p(_[e])}function m(e,t){var n=e.node.style;switch(t){case 0:n.position="absolute",n.left=e.offset.left+"px",n.right=e.offset.right+"px",n.top=e.offset.top+"px",n.bottom="auto",n.width="auto",n.marginLeft=0,n.marginRight=0,n.marginTop=0;break;case 1:n.position="fixed",n.left=e.box.left+"px",n.right=e.box.right+"px",n.top=e.css.top,n.bottom="auto",n.width="auto",n.marginLeft=0,n.marginRight=0,n.marginTop=0;break;case 2:n.position="absolute",n.left=e.offset.left+"px",n.right=e.offset.right+"px",n.top="auto",n.bottom=0,n.width="auto",n.marginLeft=0,n.marginRight=0}e.mode=t}function v(e){e.clone=document.createElement("div");var t=e.node.nextSibling||e.node,n=e.clone.style;n.height=e.height+"px",n.width=e.width+"px",n.marginTop=e.computed.marginTop,n.marginBottom=e.computed.marginBottom,n.marginLeft=e.computed.marginLeft,n.marginRight=e.computed.marginRight,n.padding=n.border=n.borderSpacing=0,n.fontSize="1em",n.position="static",n.cssFloat=e.computed.cssFloat,e.node.parentNode.insertBefore(e.clone,t)}function g(e){e.clone.parentNode.removeChild(e.clone),e.clone=void 0}function y(e){var t=getComputedStyle(e),n=e.parentNode,o=getComputedStyle(n),r=e.style.position;e.style.position="relative";var a={top:t.top,marginTop:t.marginTop,marginBottom:t.marginBottom,marginLeft:t.marginLeft,marginRight:t.marginRight,cssFloat:t.cssFloat,display:t.display},s={top:i(t.top),marginBottom:i(t.marginBottom),paddingLeft:i(t.paddingLeft),paddingRight:i(t.paddingRight),borderLeftWidth:i(t.borderLeftWidth),borderRightWidth:i(t.borderRightWidth)};e.style.position=r;var c={position:e.style.position,top:e.style.top,bottom:e.style.bottom,left:e.style.left,right:e.style.right,width:e.style.width,marginTop:e.style.marginTop,marginLeft:e.style.marginLeft,marginRight:e.style.marginRight},u=w(e),d=w(n),l={node:n,css:{position:n.style.position},computed:{position:o.position},numeric:{borderLeftWidth:i(o.borderLeftWidth),borderRightWidth:i(o.borderRightWidth),borderTopWidth:i(o.borderTopWidth),borderBottomWidth:i(o.borderBottomWidth)}};return{node:e,box:{left:u.win.left,right:T.clientWidth-u.win.right},offset:{top:u.win.top-d.win.top-l.numeric.borderTopWidth,left:u.win.left-d.win.left-l.numeric.borderLeftWidth,right:-u.win.right+d.win.right-l.numeric.borderRightWidth},css:c,isCell:"table-cell"==t.display,computed:a,numeric:s,width:u.win.right-u.win.left,height:u.win.bottom-u.win.top,mode:-1,inited:!1,parent:l,limit:{start:u.doc.top-s.top,end:d.doc.top+n.offsetHeight-l.numeric.borderBottomWidth-e.offsetHeight-s.top-s.marginBottom}}}function b(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t}function w(e){var n=e.getBoundingClientRect();return{doc:{top:n.top+t.pageYOffset,left:n.left+t.pageXOffset},win:n}}function N(){I=setInterval(function(){!d()&&C()},500)}function S(){clearInterval(I)}function k(){M&&(document[$]?S():N())}function j(){M||(r(),h(),t.addEventListener("scroll",a),t.addEventListener("wheel",s),t.addEventListener("resize",C),t.addEventListener("orientationchange",C),e.addEventListener(A,k),N(),M=!0)}function C(){if(M){f();for(var e=_.length-1;e>=0;e--)_[e]=y(_[e].node);h()}}function H(){t.removeEventListener("scroll",a),t.removeEventListener("wheel",s),t.removeEventListener("resize",C),t.removeEventListener("orientationchange",C),e.removeEventListener(A,k),S(),M=!1}function x(){H(),f()}function L(){for(x();_.length;)_.pop()}function E(e){for(var t=_.length-1;t>=0;t--)if(_[t].node===e)return;var n=y(e);_.push(n),M?l(n):j()}var P,I,_=[],M=!1,T=e.documentElement,q=function(){},$="hidden",A="visibilitychange";void 0!==e.webkitHidden&&($="webkitHidden",A="webkitvisibilitychange"),t.getComputedStyle||n();for(var O=["","-webkit-","-moz-","-ms-"],R=document.createElement("div"),D=O.length-1;D>=0;D--){try{R.style.position=O[D]+"sticky"}catch(e){}""!=R.style.position&&n()}r(),t.Stickyfill={stickies:_,add:E,remove:function(e){for(var t=_.length-1;t>=0;t--)_[t].node===e&&(p(_[t]),_.splice(t,1))},init:j,rebuild:C,pause:H,stop:x,kill:L}}(document,window),window.jQuery&&(window.jQuery.fn.Stickyfill=function(e){return this.each(function(){Stickyfill.add(this)}),this}),$(function(){"use strict";var e=$("#map-url"),t=function(t){var n=t.data("current-val");t.on("change",function(){var t=$(this),n=t.val(),o=$('option[value="'+n+'"]',t).data("default"),i=$.url().param();o?delete i.s:i.s=n,delete i.p,e&&e.length&&(i.geo=e.data("coords")),window.location=$.url().attr("path")+($.param(i)?"?"+$.param(i):"")}),n&&t.val(n)};$.fn.searchSortOrder=function(){return this.each(function(){var e=$(this);e.data("searchSortOrder")||e.data("searchSortOrder",new t(e))})}}),$(function(){"use strict";function e(){n=$(".js-lazy"),$(".js-lazy-noscript").remove(),n.removeClass("lazy"),r.off(".lazy").on("scroll.lazy resize.lazy",function(){o||(o=setTimeout(t,10))}),t()}function t(){var e=r.scrollTop()+r.height()+a;(n=n.filter(function(){var t=$(this);if(e>t.offset().top){var n=t.data("srcpath");return t.is("img")?(t.on({load:function(){this.classList.add("photo-count-show")},error:function(){this.classList.add("photo-count-show")}}),t.attr("src",n)):t.css("background-image",'url("'+n+'")'),t.removeClass("js-lazy"),!1}return!0})).length||(r.off(".lazy"),n.addClass("photo-count-show")),clearTimeout(o),o=!1}var n,o,i=$(document.body),r=$(window),a=300;i.off("reset.lazy").on("reset.lazy",e),e()}),$(function(){"use strict";var e=function(e){function t(){for(o=$("<div></div>").addClass("catalog-counts__more").hide().insertAfter(i),c=s=Math.ceil(h.length/(e.data("counterColsFull")||$("ul",i).length)),d=0;d<h.length;++d,++c)u=h[d],c>=s&&(c=0,r&&r.appendTo(o),r=$("<ul></ul>")),a=$("<li></li>").appendTo(r),$("<a></a>").addClass("js-catalog-counts__link").attr("href",u.url).text(u.name).appendTo(a),$("<span></span>").addClass("c-2 catalog-counts__number").text(" "+String(u.cnt).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")).appendTo(a);$("li",r).length>0&&r.appendTo(o)}function n(){o||t(),i.toggle(),o.toggle(),l.toggleClass("catalog-counts__switch_on").toggleClass("pseudo-link")}var o,i,r,a,s,c,u,d,l=$(".catalog-counts__switch",e),p=e.data("counterIdx"),h=avito.counters[p]||{};l.length&&(i=$(".catalog-counts__row",e).first(),l.click(function(){$(this).hasClass("catalog-counts__switch_on")||n()}))};$.fn.catalogCountsIdx=function(t){return this.each(function(){var n=$(this),o=n.data("CatalogCountsIdx");o&&"string"==typeof t?"function"==typeof o[t]&&o[t]():n.data("CatalogCountsIdx",new e(n))})}}),$(function(){"use strict";$(document).keydown(function(e){if(e.ctrlKey||e.altKey){var t;switch(e.keyCode?e.keyCode:e.which?e.which:null){case 37:t=$(".js-pagination-prev");break;case 39:t=$(".js-pagination-next")}t&&0!==t.length&&(window.location=t.attr("href"))}})}),function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/s/build/",t(t.s=298)}({298:function(e,t){Array.from(document.querySelectorAll(".js-sticky-fallback"),function(e){window.Stickyfill.add(e)})}}),$(function(){"use strict";var e=$(window),t=$(".js-catalog-item-enum"),n=[],o={0:[0,1],6:[5,6,7]},i={save:function(){n.length&&$.get("/stat/i",$.extend(avito.itemsStatUrlParams,{i:n.join("-")})),n=[]},assemble:function(){var i,r,a,s=this;for(r in o)o.hasOwnProperty(r)&&(!(i=t.eq(r)).length||"in-viewport"in $.expr.pseudos&&!i.is(":in-viewport")||(o[r].forEach(function(e){(a=s.getDataByIndex(t.eq(e),e))&&n.push(a)}),delete o[r]));Object.keys(o).length||e.off("scroll.stats"),this.save()},getDataByIndex:function(e,t){return!!e.length&&t+1+"x"+e.attr("id").substr(1)+"x"+e.data("type")}};i.assemble(),setInterval(i.save,1e4),e.on("scroll.stats",window.avito.throttle(i.assemble.bind(i),150)).on("beforeunload",i.save),$(document.body).on("reset.lazy",i.assemble.bind(i))}),$(function(){"use strict";avito.comparison=function(e,t){return Array.isArray(t)||(t=[{name:"itemId[]",value:t||e.id}]),t.push({name:avito.token.name(),value:avito.token.val()}),$.ajax({url:"/comparison/"+e.categorySlug+"/"+(e.active?"del":"add"),method:"post",data:t}).done(function(e){e.tokenName&&e.token&&avito.token.update(e.tokenName,e.token)})}}),function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/s/build/",t(t.s=317)}({317:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(70);document.addEventListener("DOMContentLoaded",function(){avito.favorites=function(e,t){return Array.isArray(t)||(t=[{name:"fav[]",value:t||e.id}]),e.searchHash&&t.push({name:"x",value:e.searchHash}),e.fromPage&&t.push({name:"from_page",value:e.fromPage}),e.fromBlock&&t.push({name:"from_block",value:e.fromBlock}),t.push({name:avito.token.name(),value:avito.token.val()}),$.ajax({url:"/favorites/"+(e.active?"del":"add")+"/"+(e.id||""),method:"post",data:t}).done(function(i){t.filter(function(e){return"fav[]"===e.name}).forEach(function(t){n.i(o.b)(t.value,!e.active)}),i.tokenName&&i.token&&avito.token.update(i.tokenName,i.token)})}})},70:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return d});var o="recently-viewed",i={},r=[],a=function(e){var t={};try{var n=JSON.parse(e);3===n.VERSION&&(t=n.items)}catch(e){}return t},s=function(){return a(window.localStorage.getItem(o))},c=function(){r.forEach(function(e){return e(i)})},u=function(e){var t,n=Date.now(),r=babelHelpers.extends({},s(),(t={},t[e.id]=babelHelpers.extends({},e,{timestamp:n}),t));return i=Object.keys(r).map(function(e){return r[e]}).sort(function(e,t){return e.timestamp<t.timestamp}).slice(0,6).reduce(function(e,t){return e[t.id]=t,e},{}),window.localStorage.setItem(o,JSON.stringify({VERSION:3,items:i})),i},d=function(e,t){return(i=s())[e]&&(i[e].favorite=t,window.localStorage.setItem(o,JSON.stringify({VERSION:3,items:i}))),c(),i};window.addEventListener("storage",function(e){e.key===o&&(i=a(e.newValue),c())})}}),$(function(){"use strict";var e=function(){var e={},t=avito.simpleTemplate('<div class="tooltip tooltip_top favorites-tooltip">Добавлено <a href="/favorites/{{categorySlug}}">в избранное</a><a class="button button-origin is-{{compareState}}" href="/comparison/{{categorySlug}}">Сравнить <span class="js-button-compare-count">{{compareCount}}</span></a><div class="tooltip-arrow"></div></div>');return{render:function(e){return t.render({compareState:e.access.compare?"active":"hidden",compareCount:e.compare.count,categorySlug:e.categorySlug})},reveal:function(t,n,o){return this.has(n.id)?e[n.id].find(".js-button-compare-count").text(n.compare.count):e[n.id]=$(this.render(n)).appendTo(t).on("click",function(e){e.stopPropagation()}),e[n.id].timer&&clearTimeout(e[n.id].timer),e[n.id].timer=setTimeout(function(){e[n.id].hide()},4e3),e[n.id][o?"show":"hide"]()},has:function(t){return e[t]},closes:function(){var t;for(t in e)e.hasOwnProperty(t)&&e[t].hide()}}}();$(document.body).on("click",e.closes).on("click",".js-favorites-add-toggle",function(t,n){var o=$(this),i=o.data("event-config");$.when(avito.favorites(i)).then(function(){return i.access.compare?avito.comparison(i):{count:0}}).done(function(r){var a=o.closest(".js-favorites-add"),s=a.find(".js-favorites-add-label"),c=a.find(".js-favorites-add-icon");i.active=!i.active,i.compare={count:r.count},o.data("event-config",i).attr("href","/favorites/"+(i.active?"add":"del")+"/"+i.id).attr("title",i.active?"Удалить из избранного":"Добавить в избранное"+(i.access.compare?" и в сравнение":"")),s.text(i.active?"Удалить":"В избранное"),c.attr("data-state",i.active?"active":"empty"),!i.active||n&&!n.showToolitp||(e.closes(),e.reveal(a,i,!0)),i.active&&avito.tracking.trackGTMEventWithVertical(t.target.dataset.rootCategoryId,"Item","add_favorites")}).fail(function(){avito.notifications.push(["Что-то пошло не так!","Возможно, это была наша вина, и мы очень сожалеем об этом. Пожалуйста, повторите ваши действия. Спасибо."])}),t.preventDefault()})}),function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/s/build/",t(t.s=367)}({367:function(e,t){function n(e){e.classList.contains(o)?(e.classList.remove(o),avito.cookie.set(r,1,i)):e.classList.add(o)}var o="verified-badge-tooltip-visible",i=1814400,r="verified_badge_closed";document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".js-verified-badge"),t=Boolean(avito.cookie.get(r));Array.from(e).forEach(function(e,o){var i=e.querySelector(".js-verified-badge-tooltip"),r=e.querySelector(".js-verified-badge-label"),a=e.querySelector(".js-verified-badge-tooltip-close");"item"===avito.pageId&&(i.querySelector(".tooltip-arrow").style.left=r.offsetWidth+42+"px"),r.addEventListener("click",function(){return n(i)}),a.addEventListener("click",function(){return n(i)}),t||0!==o||n(i)})})}}),$(function(){"use strict";function e(e){var t,a=e.data("currencies"),s=e.data("prices"),c=e.data("date");if(a){i="";for(t in a)a.hasOwnProperty(t)&&(i+="<th>"+a[t].title_plural+("RUB"!==t?"*":"")+"</th>")}s&&(r="",s.forEach(function(e,t){var n;r+='<tr class="'+(t%2==1?"even":"odd")+'"><th>'+e.title+"</th>";for(n in e.currencies)e.currencies.hasOwnProperty(n)&&(r+="<td>"+avito.number.currency(e.currencies[n]," ")+"</td>");r+="</tr>"})),e.append(o.render({headHtml:i,bodyHtml:r,dateCB:c})),e.paramsPopup({content:e.find(".popup-prices__content"),onShow:function(e){e.$popup.addClass("b-popup-prices"),n.removeClass("popup-prices-show_open"),(n=e.$activeSelect.find(".js-btn-circle")).addClass("popup-prices-show_open"),e.updatePosition(e.$activeSelect),$(this.content).find(".close").off("click").one("click",function(){e.hidePopup()})}})}function t(){$(".popup-prices__wrapper").each(function(){var t=$(this);t.data("paramsPopup")||e(t)})}var n=$(),o=avito.simpleTemplate('<div class="popup-prices__content"><i class="ix ix-x-gray close"></i><table class="popup-prices__table"><thead class="c-2"><th class="popup-prices__label">Цена</th>{{headHtml}}</thead><tbody>{{bodyHtml}}</tbody></table><span class="c-2">*по курсу ЦБ на {{dateCB}}</span></div>'),i="",r="";$.mediator.on("params.popup.hide",function(e,t){var o=t.popup.$popup;o.hasClass("b-popup-prices")&&(o.removeClass("b-popup-prices"),n.removeClass("popup-prices-show_open"))}),$.mediator.on("refresh_content.search_map",function(e,n){"done"===n&&($('.popup-param[data-name^="params-popup-"]',".b-param-popups").remove(),t())}),t()}),function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/s/build/",t(t.s=309)}({11:function(e,t,n){"use strict";function o(e,t){return[e,t].map(encodeURIComponent).join("=")}function i(e,t){var n=encodeURIComponent(e);return Object.keys(t).map(function(e){var o=[e,t[e]].map(encodeURIComponent),i=o[0],r=o[1];return n+"["+i+"]="+r}).join("&")}function r(e,t){var n=encodeURIComponent(e);return t.map(function(e){return n+"[]="+encodeURIComponent(e)}).join("&")}var a=n(15);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(function(t){var s=e[t];return Array.isArray(s)?r(t,s):n.i(a.a)(s)?i(t,s):o(t,s)}).join("&")}},117:function(e,t,n){"use strict";var o,i,r=n(12),a=(i=o=function(){function e(t){babelHelpers.classCallCheck(this,e),this.componentNode=t,this.showmoreNode=this.componentNode.querySelector(".js-recommendations-show-more"),this.recommendationListNode=this.componentNode.querySelector(".js-recommendations-list");var n=this.componentNode.dataset,o=n.items,i=n.step,r=n.count,a=n.page,s=void 0===a?"":a,c=n.block,u=void 0===c?"":c,d=n.location,l=void 0===d?"":d,p=n.serpHash,h=void 0===p?"":p;this.showMoreitemIds=o.split(","),this.step=Number(i),this.count=Number(r),this.locationId=l,this.serpHash=h,this.page=s,this.block=u,this.isLoading=!1,this.internalEvents={},delete this.componentNode.dataset.items,delete this.componentNode.dataset.step,delete this.componentNode.dataset.location,delete this.componentNode.dataset.serpHash,this.getRecommendations=this.getRecommendations.bind(this),this.logShowMore=this.logShowMore.bind(this),this.attachEvents()}return e.prototype.attachEvents=function(){var e=this;this.showmoreNode&&this.recommendationListNode&&(this.showmoreNode.addEventListener("click",this.getRecommendations),this.attachInternalEvent("loading",function(t){e.isLoading=t,e.showmoreNode.classList.toggle("is-loading",t)})),this.recommendationListNode.addEventListener("click",function(t){var n=t.target;(n.matches(".js-item-link")||n.closest(".js-item-link"))&&e.triggerInternalEvent("clickToItemLink",e.serpHash)})},e.prototype.attachInternalEvent=function(e,t){this.internalEvents[e]||(this.internalEvents[e]=[]),this.internalEvents[e].push(t)},e.prototype.triggerInternalEvent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.internalEvents[e]&&this.internalEvents[e].forEach(function(e){e(t)})},e.prototype.getRecommendations=function(){var e=this;if(!this.isLoading){this.triggerInternalEvent("loading",!0);var t=["locationId="+this.locationId,"limit="+this.step,"items="+this.showMoreitemIds.join(","),"currentPage="+this.page,"currentBlock="+this.block];fetch("/js/recommendations/more?"+t.join("&"),{method:"get",credentials:"same-origin",headers:new Headers({"X-Requested-With":"XMLHttpRequest"})}).then(function(e){return 200===e.status?e.json():Promise.reject(e.status)}).then(function(t){var n=t.ids,o=t.html,i=t.theEnd;e.triggerInternalEvent("loading",!1),o&&(e.recommendationListNode.insertAdjacentHTML("beforeEnd",o),e.count=e.count+n.length),e.showMoreitemIds=e.showMoreitemIds.filter(function(e){return!n.includes(Number(e))}),e.logShowMore(),i&&e.showmoreNode.remove()}).catch(function(t){e.triggerInternalEvent("loading",!1),"number"==typeof t&&204===t?e.showmoreNode.remove():e.triggerInternalEvent("showMoreError")})}},e.prototype.logShowMore=function(){n.i(r.a)({version:2,eid:2662,x:this.serpHash,block_items_display:this.count,block_items_added:this.step})},e}(),o.displayName="Recommendations",i);t.a=a},12:function(e,t,n){"use strict";var o=n(11);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/events/add",i={};Object.keys(e).forEach(function(t){var n=e[t];void 0!==n&&null!==n&&(i[t]=n)});var r=n.i(o.a)(i);return fetch(t,{method:"post",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:r}).then(function(e){return e.status>=400?Promise.reject(e):e})}},125:function(e,t,n){"use strict";t.a=function(){return new Promise(function(e,t){if(window.ymaps)e();else{window.ymapsReady=e;var n=document.createElement("script");n.onerror=t,n.src=o;var i=document.getElementsByTagName("script")[0];i?i.before(n):document.head.appendChild(n)}})};var o="//api-maps.yandex.ru/2.1/?lang=ru-RU&onload=ymapsReady"},131:function(e,t,n){"use strict";n(18),n(291);var o=n(41),i=(n(295),n(296),n(292),n(11),n(78),n(15));n(293),n(125),n(12),n(294);n.d(t,"a",function(){return o.a}),n.d(t,"b",function(){return i.a})},15:function(e,t,n){"use strict";t.a=function(e){return e&&"object"===(void 0===e?"undefined":babelHelpers.typeof(e))&&e.constructor===Object}},16:function(e,t,n){"use strict";t.a=function(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];var r=void 0;if(!e){if(t){var a=0;r=new Error("Invariant: "+t.replace(/%s/g,function(){var e=o[a];return a+=1,e}))}else r=new Error("Произошла ошибка! Запустите код в development-режиме, чтобы узнать детали");throw r}}},18:function(e,t,n){"use strict";t.a=function(e,t,n){var o=void 0;return function(){for(var i=this,r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];n&&!o&&e.apply(this,a),clearTimeout(o),o=setTimeout(function(){o=null,n||e.apply(i,a)},t)}}},233:function(e,t,n){"use strict";var o,i,r=n(131),a=(i=o=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};babelHelpers.classCallCheck(this,e),this.cvrContainerNode=t,this.categoryId=n.categoryId,this.itemIds=[],this.state={recommendationsShown:!1}}return e.prototype.init=function(){var e=this;fetch("/js/recommendations",{method:"post",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"},body:"categoryId="+this.categoryId+"&limit=8"}).then(function(e){return e.json()}).then(function(t){e.itemIds=Object.keys(t.items),e.itemIds.length&&e.render(t.items)}).then(function(){e.itemIds.length&&(window.addEventListener("scroll",n.i(r.a)(function(){return e.handlePageScroll()},200)),e.handlePageScroll())})},e.prototype.getItemHTML=function(e){var t=e.title,n=e.category,o=null!==e.price?'<p class="cvr-item-price has-bold">'+avito.number.currency(e.price)+' <span class="font_arial-rub">₽</span></p>':"";return t=t.length>20?t.slice(0,17)+"...":t,n=n.length>20?n.slice(0,17)+"...":n,'\n            <div class="cvr-item js-cvr-item" data-id="'+e.id+'">\n                <a href="'+e.url+'" class="cvr-item-img-wrapper-link js-cvr-item-img-wrapper-link" target="_blank" rel="noopener noreferrer">\n                    <img class="cvr-item-img" src="'+e.image_url+'" alt="'+e.title+'" />\n                </a>\n                <a href="'+e.url+'" class="cvr-item-link js-cvr-item-link" target="_blank" rel="noopener noreferrer">'+t+'</a>\n                <p class="cvr-item-category">'+n+"</p>\n                "+o+"\n            </div>\n        "},e.prototype.render=function(e){var t=this;this.cvrContainerNode.innerHTML='\n            <div class="cvr-title">Популярное</div>\n            <div class="cvr-items-container">\n                '+Object.keys(e).map(function(n){return t.getItemHTML(e[n])}).join("")+"\n            </div>\n        "},e.prototype.handlePageScroll=function(){if(!this.state.shown){var e=window.innerHeight;this.cvrContainerNode.getBoundingClientRect().top+200<e&&(this.state.shown=!0,this.logEvent({event:"view",categoryId:this.categoryId,itemIds:this.itemIds}))}},e.prototype.logEvent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};fetch("/js/recommendations/clickstream",{method:"post",credentials:"same-origin",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({event:e})})},e}(),o.displayName="CvrComponent",i);t.a=a},234:function(e,t,n){"use strict";var o,i,r=n(289),a=(i=o=function(){function e(){var t=this;babelHelpers.classCallCheck(this,e),this.handleClickGlobalLink=function(e){e.preventDefault();var t=e.target.dataset,n=t.notfound,o=t.shortResults,i=setTimeout(function(){location.href=e.target.href},300);r.a.notify("events",{name:"searchresults",isSearchResultEmpty:Boolean(n),isBannerOnFirstPage:Boolean(o)}).then(function(){clearTimeout(i),location.href=e.target.href})},this.handleSearchUpdate=function(){var e=t.isDeliveryDisabled();t.deliveryCheckboxCheckboxNode.disabled=e,t.deliveryCheckboxLabelNode.classList.toggle("hidden",e)};var n=document.querySelector(".js-catalog-search-checkboxes");if(n){var o=n.dataset,i=o.deliveryCategories,a=o.deliveryLocations;this.availableCategories=JSON.parse(i),this.allowedLocations=JSON.parse(a),this.globalSearchLinkNode=document.querySelector(".js-catalog-delivery-notfound-link"),this.searchFormNode=document.querySelector(".js-search-form-catalog"),this.categorySelectNode=this.searchFormNode.querySelector(".js-search-form-category"),this.locationSelectNode=this.searchFormNode.querySelector(".js-search-form-region"),this.deliveryCheckboxLabelNode=this.searchFormNode.querySelector(".js-search-form-delivery"),this.deliveryCheckboxCheckboxNode=this.searchFormNode.querySelector(".js-search-form-delivery-checkbox"),this.init()}}return e.prototype.init=function(){this.categorySelectNode.addEventListener("change",this.handleSearchUpdate),this.locationSelectNode.addEventListener("change",this.handleSearchUpdate),this.globalSearchLinkNode&&this.globalSearchLinkNode.addEventListener("click",this.handleClickGlobalLink),this.handleSearchUpdate()},e.prototype.isDeliveryDisabled=function(){var e=parseInt(this.categorySelectNode.value,10),t=parseInt(this.locationSelectNode.value,10);return!this.availableCategories.includes(e)||!this.allowedLocations.includes(t)},e}(),o.displayName="DeliverySearch",i);t.a=a},235:function(e,t,n){"use strict";var o,i,r=n(131),a=n(280),s=n(30),c=document.querySelector(".js-anonym-phone-popup-content"),u=500,d=c?new s.a({moveDataNode:c,isFlipPopup:!0}):null,l=d?c.querySelector(".js-item-popup-flip-card-content_front-side"):null,p=(i=o=function(){function e(){babelHelpers.classCallCheck(this,e),this.showPopup=function(e){var t=e.image,n=e.sellerName,o=void 0===n?"":n;if(null!==d&&null!==l){var i='\n            <div class="item-phone-big-number js-item-phone-big-number">\n                <img src="'+t+'"/>\n            </div>\n            <div class="item-phone-call-note">\n                Номер продавца защищён. SMS и сообщения в WhatsApp, Viber доставлены не будут.\n            </div>\n            <div class="js-seller-name seller-name">\n                '+o+"\n            </div>";l.innerHTML=i,d.show()}},this.handleDocumentClick=this.handleDocumentClick.bind(this),this.handleWindowScroll=this.handleWindowScroll.bind(this),this.trackableNodes=[],this.imagesNodes={},document.addEventListener("click",this.handleDocumentClick),window.addEventListener("scroll",n.i(r.a)(this.handleWindowScroll,u)),this.handleWindowScroll(),this.handleChargedResumeItems(),this.showContactButtons()}return e.prototype.handleWindowScroll=function(){var e=window.innerHeight,t=[];this.trackableNodes=this.trackableNodes.filter(function(n){var o=n.getBoundingClientRect().bottom;if(o<e){var i=n.dataset,r=i.itemId,a=i.position;t.push({itemId:r,position:a})}return o>e})},e.prototype.handleDocumentClick=function(e){var t=this,n=e.target.closest(".js-item-extended-contacts");if(n){var o=n.closest(".js-item_table-extended-contacts");n.classList.add("is-loading"),o&&o.classList.add("is-loading");var i=n.closest(".js-item-extended"),r=i.dataset,a=r.itemId,s=r.position,c=r.pkey,u="isXl"in i.dataset,d=u?"xs":"s";if(u){var l=new FormData;l.append("itemId",a),l.append("position",s),fetch("/js/event/extended-snippet/phone/show",{method:"POST",credentials:"same-origin",body:l})}var p="/items/phone/"+a+"?pkey="+avito.utils.phoneDemixer(a,c)+"&h=36&vsrc="+d;fetch(p,{method:"GET",credentials:"same-origin"}).then(function(e){return e.ok?e.json():Promise.reject()}).then(function(e){var n=e.error,o=e.image64,i=e.anonymImage64,r=e.isAnonym,s=e.sellerName;if(n)return Promise.reject();var c=document.querySelector('.js-item-extended-contacts[data-item-id="'+a+'"]');if(!c)return null;var u=new Image;return u.className="item_table-extended-phone",u.src=o,c.replaceWith(u),r&&t.showPopup({image:i,sellerName:s}),t.imagesNodes[a]=u,null}).catch(function(){t.handleError(n)})}},e.prototype.handleError=function(e){var t=document.createElement("div");t.innerText="Что-то пошло не так",t.className="item_table-extended-phone-error",e.replaceWith(t)},e.prototype.fixDescriptionHeight=function(e){if(e){var t=window.getComputedStyle(e),n=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),o=e.scrollHeight,i=e.parentNode,r=parseInt(window.getComputedStyle(i).maxHeight,10)-(parseInt(i.clientHeight,10)+n);e.style.flexBasis=Math.min(o,r)+"px",e.clientHeight<e.scrollHeight&&e.classList.add("item_table-extended-description_blurred")}},e.prototype.fixContactButton=function(e){if(e){var t=e.dataset.itemId,n=this.imagesNodes[t];n&&e.replaceWith(n)}},e.prototype.add=function(e){var t=this,n=document.querySelector(e);n&&(Array.from(n.querySelectorAll(".js-item-extended"),function(e){t.fixDescriptionHeight(e.querySelector(".js-item_table-extended-description")),t.fixContactButton(e.querySelector(".js-item-extended-contacts"))}),Array.from(n.querySelectorAll(".js-item-trackable"),function(e){t.trackableNodes.push(e)}),this.handleWindowScroll())},e.prototype.handleChargedResumeItems=function(){Array.from(document.querySelectorAll(".js-resume-contact")).forEach(function(e){new a.a({$node:$(e)})})},e.prototype.showContactButtons=function(){Array.from(document.querySelectorAll(".js-item_table-extended-contacts")).forEach(function(e){e.classList.remove("item_table-extended-contacts_hidden")})},e}(),o.displayName="ExtendedItems",i);t.a=p},24:function(e,t,n){"use strict";var o,i,r=(i=o=function(){function e(t){babelHelpers.classCallCheck(this,e),this.state=babelHelpers.extends({},t)}return e.prototype.get=function(e){return void 0===e?babelHelpers.extends({},this.state):this.state[e]},e.prototype.set=function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o={};return Object.keys(e).forEach(function(i){n&&t.state[i]===e[i]||(o[i]=e[i],t.state[i]=e[i])}),o},e}(),o.displayName="Dataset",i);t.a=r},280:function(e,t,n){"use strict";var o,i,r=n(5),a=n(42),s=n(30),c=n(67),u=".js-item_table-extended-contacts",d=document.querySelector(".js-catalog-list"),l=document.querySelector(".js-item-phone-popup-content"),p=null,h=null,f=$(".js-item-tooltip");l&&(p=new s.a({moveDataNode:l,isFlipPopup:!0}));var m=null,v=null;f.length>0&&(h=new a.a({$node:f})).$tooltip.on("hide.tooltip",function(){m&&m.classList.remove("charging-active")});var g=function(e){return'<p>Для связи с соискателем\n        <a href="/account/cv_packages?item_id='+e+'">оплатите доступ к контактам</a>\n    </p>'},y=(i=o=function(e){function t(n){var o=n.$node;babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,e.call(this,{$node:o}));return i.initNodes=function(){i.itemContactsWrapperNode=i.node.closest(u),i.favoritesNode=i.itemNode.querySelector(".js-favorites-add-toggle"),i.favoritesIconNode=i.favoritesNode.querySelector(".js-favorites-add-icon"),l&&(i.itemPopupFrontSideNode=l.querySelector(".js-item-popup-flip-card-content_front-side"),i.itemPopupBackSideNode=l.querySelector(".js-item-popup-flip-card-content_back-side"))},i.showPopup=function(){p.setFrontSide(),p.show(),p.showLoader(),fetch("/cv/current_package",{method:"post",credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"})}).then(function(e){return e.json()}).then(function(e){p.hideLoader(),i.cvPackage=e.package,i.setPackageState(),i.renderPackage(),i.attachPackageEvents()}).catch()},i.renderContact=function(){var e='\n            <div class="item-phone-big-number js-item-phone-big-number">\n                <img src="'+i.image+'"/>\n            </div>\n            <div class="item-phone-call-note">\n                Скажите соискателю, что нашли это объявление на '+(avito.siteName?avito.siteName:"Avito")+'\n            </div>\n            <div class="js-seller-name seller-name">\n                '+i.sellerName+"\n            </div>";i.itemPopupBackSideNode.innerHTML=e},i.acceptViewCV=function(e){e.preventDefault(),p.showLoader(),fetch("/cv/view",{method:"post",body:"itemId="+i.itemId,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"})}).then(function(e){return e.json()}).then(function(e){return!e&&!e.status||"error"===e.status?(p.hideLoader(),Promise.reject()):"ok"===e.status?(1===i.cvPackage.countLeft&&delete d.dataset.cvPackage,i.sellerName=e.item.user.name,i.getPhoneNumber()):null}).then(function(e){return e.ok?e.json():Promise.reject()}).then(function(e){var n=e.error,o=e.image64;n?Promise.reject():(i.image=o,i.renderContact(),i.setPhoneNumber(o),p.flip(),p.hideLoader(),t.currentFavoritesNode=i.favoritesNode)}).catch(function(){})},i.setPhoneNumber=function(e){var t=new Image;t.className="item_table-extended-phone",t.src=e,i.node.replaceWith(t),i.itemContactsWrapperNode.classList.remove("item_table-extended-contacts_transparent")},i.isLoading=function(e){i.node.classList.toggle("is-loading",e),i.itemContactsWrapperNode&&i.itemContactsWrapperNode.classList.toggle("is-loading",e)},i.getPhoneNumber=function(){var e=i.isXlSnippet?"xs":"s",t="/items/phone/"+i.itemId+"?pkey="+avito.utils.phoneDemixer(i.itemId,i.phoneKey)+"&vsrc="+e;return fetch(t,{method:"GET",credentials:"same-origin"})},i.node=i.$node.get(0),i.itemNode=i.node.closest(".js-catalog-item-enum"),i.itemId=i.itemNode.dataset.itemId,i.phoneKey=i.itemNode.dataset.pkey,i.packageState=null,i.packageFreePercent=null,i.isXlSnippet="isXl"in i.itemNode.dataset,i.isResumeItem=i.itemNode.classList.contains("item_resume"),i.initNodes(),i.attachEvents(),i}return babelHelpers.inherits(t,e),t.prototype.showTooltip=function(e){h.hide(),v&&v.classList.remove("charging-active"),v=m,(m=this.itemContactsWrapperNode).classList.add("charging-active"),h.show({position:{side:["bottom","center"],relativeNode:this.node,offset:{top:10},slide:!1},content:e,maxWidth:195,autoHideTime:2e4})},t.prototype.setPackageState=function(){this.packageFreePercent=this.cvPackage.countLeft?Math.round(100*this.cvPackage.countLeft/this.cvPackage.totalCount):0,this.packageState="bad",this.cvPackage.isInactive?this.packageState="inactive":this.packageFreePercent>50?this.packageState="good":this.packageFreePercent>20&&(this.packageState="mid")},t.prototype.renderPackage=function(){var e='\n            <div class="chargeable-packet js-chargeable-packet">\n                <div class="chargeable-packet-header">Доступ к контактным данным соискателя</div>\n                <p class="chargeable-packet-sub-text">\n                    Для доступа к контактным данным воспользуйтесь действующим пакетом просмотров.\n                </p>\n                <div class="cv-package">\n                    <div class="status-bar status-bar_'+this.packageState+' js-status-bar">\n                        <div class="status-bar__inner">\n                            <div class="status-bar__percent-line js-status-bar__percent-line"\n                                style="width: '+this.packageFreePercent+'%"></div>\n                            <div class="status-bar__text js-status-bar__status-name">\n                                '+(this.cvPackage.countLeft?this.cvPackage.countLeft+"/"+this.cvPackage.totalCount:"В пакете не осталось просмотров")+'\n                            </div>\n                        </div>\n                    </div>\n                    <div class="cv-package-info clearfix">\n                        <div class="cv-package-title">Пакет &laquo;\n                            <span class="js-cv-package-title">'+this.cvPackage.name+'</span>&raquo;\n                        </div>\n                        <div class="cv-package-status js-cv-package-status">'+this.cvPackage.statusText+'</div>\n                    </div>\n                </div>\n\n                <p class="chargeable-packet-info js-chargeable-packet-info">Из пакета\n                    <span class="chargeable-packet-name js-cv-package-title">\n                        '+this.cvPackage.name+'\n                    </span> будет списан 1 просмотр из\n                    <span class="js-cv-package-count-left">\n                        '+this.cvPackage.countLeft+"\n                    </span> "+c.a.plural(this.cvPackage.countLeft,["оставшегося","оставшихся","оставшихся"])+'.\n                </p>\n\n                <div class="chargeable-packet-actions">\n                    <button class="chargeable-packet-accept\n                        js-chargeable-packet-accept button button-origin button-origin_large">Списать просмотр</button>\n                </div>\n            </div>';this.itemPopupFrontSideNode.innerHTML=e},t.prototype.attachPackageEvents=function(){var e=document.querySelector(".js-chargeable-packet-accept");e&&e.addEventListener("click",this.acceptViewCV)},t.prototype.attachEvents=function(){var e=this;this.node.addEventListener("click",function(n){n.stopPropagation(),e.isLoading(!0),e.getPhoneNumber().then(function(t){if(e.isLoading(!1),t.ok)return t.json();throw 401===t.status&&(window.location="#login"),new Error("JSON hasn't been got")}).then(function(n){var o=n.image64,i=n.error;void 0!==o?(e.isResumeItem&&t.addToFavorites(e.favoritesNode),e.setPhoneNumber(o)):"no_cv_view"===i&&("cvPackage"in d.dataset?e.showPopup():e.showTooltip(g(e.itemId)))}).catch(function(){e.isLoading(!1)})})},t}(r.a),o.displayName="ItemChargeable",i);y.addToFavorites=function(e){y.isActiveFavorites(e)||e.click()},y.isActiveFavorites=function(e){return"empty"!==e.querySelector(".js-favorites-add-icon").dataset.state},t.a=y,$.mediator.on("popup:hidden",function(){y.currentFavoritesNode&&(y.addToFavorites(y.currentFavoritesNode),y.currentFavoritesNode=null)})},289:function(e,t,n){"use strict";var o=n(77),i=n(290);t.a=new o.a({server:"/delivery",token:n.i(i.a)()})},290:function(e,t,n){"use strict";t.a=function(){var e=document.getElementById("delivery"),t=e?e.dataset.token:null;if(!e||!t)return null;try{return JSON.parse(t)}catch(e){return null}}},291:function(e,t,n){"use strict";n(131)},292:function(e,t,n){"use strict"},293:function(e,t,n){"use strict"},294:function(e,t,n){"use strict"},295:function(e,t,n){"use strict"},296:function(e,t,n){"use strict"},30:function(e,t,n){"use strict";var o,i,r=(i=o=function(){function e(t){babelHelpers.classCallCheck(this,e),t.className=[t.className,"item-popup",t.isFlipPopup?"item-popup_type-flip":null].filter(Boolean).join(" ");var n=e.popup(t);if(t.moveDataNode&&1===t.moveDataNode.nodeType&&n.moveData(t.moveDataNode),n.flip=function(){},n.setFrontSide=function(){},t.isFlipPopup){var o=n.$contentWrapper.get(0),i=o.querySelectorAll(".js-item-popup-close");Array.from(i).forEach(function(e){e.addEventListener("click",function(){n.hide()})}),n.flipCardNode=o.querySelector(".js-item-popup-flip-card"),n.flip=this.flip,n.setFrontSide=this.setFrontSide,n.isFlip=!1}return $.mediator.on("popup:hide",function(){n.hide(!0)}),n}return e.prototype.flip=function(){this.flipCardNode&&(this.isFlip=!this.isFlip,this.flipCardNode.classList.toggle("item-popup-flip-card_side-back",this.isFlip))},e.prototype.setFrontSide=function(){this.flipCardNode&&(this.isFlip=!1,this.flipCardNode.classList.remove("item-popup-flip-card_side-back"))},e}(),o.displayName="ItemPopup",i);r.popup=$.popup,t.a=r},309:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(48),i=n(234),r=n(235),a=n(233),s=n(117),c=n(47),u=void 0,d=function(e){u.add(e)};new(n(46).a),document.addEventListener("DOMContentLoaded",function(){var e=function(e){avito.cookie.set("tmpSearchHash",e,60)},t=document.querySelectorAll(".js-recommendations");if(t.length){var n=new c.a({$node:$(".js-slide-alert")});Array.from(t).forEach(function(t){var o=new s.a(t);o.attachInternalEvent("showMoreError",function(){n.show({type:"error",message:"Произошла ошибка показа рекомендаций",autoHideTime:8e3})}),o.attachInternalEvent("clickToItemLink",e)})}var i=document.querySelector(".js-catalog-vips-container");if(i){var r=i.dataset.serpHash;r&&(delete i.dataset.serpHash,Array.from(i.querySelectorAll(".js-vip-item-link")).forEach(function(t){t.addEventListener("click",function(){return e(r)})}))}new o.a({container:document.querySelector(".js-nps-survey-container")}).init();var u=document.querySelector(".js-cvr-container");if(u)try{var d=JSON.parse(u.getAttribute("data-config"));new a.a(u,d).init()}catch(e){}var l=function(){if("function"==typeof $.fn.searchMap){var e=$(".b-search-map");e.searchMap({hasFullScreen:!0,priceDimensionValue:e.data("price-dimension")})}},p=document.querySelector(".js-search-filters-wrapper");p&&(p.dataset.isFiltersMount?l():p.addEventListener("filtersMount",l))}),$(function(){u=new r.a,function(){var e=$(document.body),t={breadcrumbs:{selector:".js-breadcrumbs",init:function(){var e=$(".js-sort-select");e&&e.length&&e.searchSortOrder()}},catalogBeforeAds:{parentSelector:".js-catalog_before-ads",init:function(){e.trigger("reset.lazy"),d(this.parentSelector)}},catalogAfterAds:{parentSelector:".js-catalog_after-ads",init:function(){e.trigger("reset.lazy"),d(this.parentSelector)}},counts:{selector:".catalog-counts",init:function(){var e=$(this.selector).find(".catalog-counts__section[data-counter-idx]");e&&e.length&&e.catalogCountsIdx()}},vips:{parentSelector:".js-catalog-vips-container",selector:".b-vips"},pager:{selector:".js-pages"}};$.mediator.on("catalog.init_block",function(e,n){var o=void 0,i=void 0;if(n){var r=t[n.name],a=$.trim(n.html||"");if(r){if(r.parentSelector)o=$(r.parentSelector),i="html";else if(r.selector){if(!a)return;o=$(r.selector),i="replaceWith"}r.replace&&r.replace.apply(r),o[i](a),r.init&&r.init.apply(r)}}}).on("catalog.clear_blocks",function(){Object.keys(t).forEach(function(e){var n=t[e],o=n.replace,i=n.parentSelector,r=n.selector;o&&o.apply(n);var a=document.querySelector(i||r);if(a)for(;a.firstChild;)a.removeChild(a.firstChild)})}),$.each(t,function(e,t){t.init&&t.init.apply(t)})}(),"function"==typeof $.fn.catalogCountsIdx&&$(".catalog-counts__section[data-counter-idx]").catalogCountsIdx(),new i.a})},32:function(e,t){function n(e,t){var n=new Date(e);return"number"!=typeof e||"string"!=typeof t?"":t.replace(N,function(e,t){switch(t){case"yyyy":return n.getFullYear();case"yy":return String(n.getFullYear()).slice(2);case"mmmm":return a(n.getMonth());case"mmm":return s(n.getMonth());case"mm":return r(n.getMonth()+1);case"m":return n.getMonth()+1;case"dd":return r(n.getDate());case"d":return n.getDate();case"EEEE":return c(n.getDay());case"HH":return r(n.getHours());case"H":return n.getHours();case"MM":return r(n.getMinutes());case"M":return n.getMinutes();case"ss":return r(n.getSeconds());case"s":return n.getSeconds();default:return t}})}function o(e,t,o){var r=void 0!==(o=o||{}).toTime?o.toTime:Date.now();if(!Array.isArray(e)||"number"!=typeof t||"number"!=typeof r)return"";for(var a,s=i(t,r),c="",l=0;l<e.length;l++)if("default"===(a=e[l].rule||"default")||d(a,s)){c=e[l].output||"";break}return u("function"==typeof c?c(s,t,r):n(t,c),s)}function i(e,t){var n=new Date(e).setHours(0,0,0,0),o=new Date(t).setHours(0,0,0,0);return Math.round((o-n)/p)}function r(e){return(e<10?"0":"")+e}function a(e){return h[e]}function s(e){return f[e]}function c(e){return m[e]}function u(e,t){return String(e).replace("#n",t)}function d(e,t){var n=g[e];return"number"==typeof n?n===t:"function"==typeof n&&n(t)}function l(e){if("object"!==(void 0===e?"undefined":babelHelpers.typeof(e)))return e;if(Array.isArray(e))return e.map(l);var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=l(e[n]));return t}var p=864e5,h=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],f=["янв","фев","мар","апр","мая","июн","июл","авг","сен","окт","ноя","дек"],m=["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],v={dayWeeksAccusative:["В воскресенье","В понедельник","Во вторник","В среду","В четверг","В пятницу","В субботу"],getDays:function(e){return 1===e||21===e||31===e?"день":e>=2&&e<=4||e>=22&&e<=24?"дня":"дней"}},g={"day after tomorrow":-2,tomorrow:-1,today:0,yesterday:1,"day before yesterday":2,"in a week":function(e){return e>=0&&e<=6},"week ago":7,"in a month":function(e){return e>=0&&e<=31},default:"default"},y=[{rule:"day after tomorrow",output:"Послезавтра в %H:%MM"},{rule:"tomorrow",output:"Завтра в %H:%MM"},{rule:"today",output:"Сегодня в %H:%MM"},{rule:"yesterday",output:"Вчера в %H:%MM"},{rule:"day before yesterday",output:"Позавчера в %H:%MM"},{rule:"week ago",output:"Неделю назад"},{rule:"in a week",output:function(e,t){return v.dayWeeksAccusative[new Date(t).getDay()]}},{rule:"in a month",output:function(e){return"#n "+v.getDays(e)+" назад"}},{rule:"default",output:"%dd.%mm.%yyyy %H:%MM"}],b=[{rule:"day after tomorrow",output:"Послезавтра"},{rule:"tomorrow",output:"Завтра"},{rule:"today",output:"Сегодня"},{rule:"yesterday",output:"Вчера"},{rule:"day before yesterday",output:"Позавчера"},{rule:"default",output:"%dd.%mm.%yyyy"}],w=[{rule:"day after tomorrow",output:"Послезавтра в %H:%MM"},{rule:"tomorrow",output:"Завтра в %H:%MM"},{rule:"today",output:"Сегодня в %H:%MM"},{rule:"yesterday",output:"Вчера в %H:%MM"},{rule:"day before yesterday",output:"Позавчера в %H:%MM"},{rule:"default",output:"%dd.%mm.%yyyy %H:%MM"}],N=/%(yy(?:yy)?|m+|([dHMs])\2?|EEEE)/g;e.exports={format:n,relative:function(e,t){return t=t||{},o(y,e,{toTime:t.toTime})},respective:function(e,t){return void 0===(t=t||{}).isShowHours||t.isShowHours?o(w,e,{toTime:t.toTime}):o(b,e,{toTime:t.toTime})},customRelative:o,getRelativeRules:function(){return l(y)},getRespectiveRules:function(){return l(b)},getRespectiveHoursRules:function(){return l(w)}}},33:function(e,t){t.plural=function(e,t){"use strict";var n=2;return e%10==1&&e%100!=11?n=0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)&&(n=1),t[n]}},34:function(e,t){function n(e,t){var n,r=parseFloat(e);if(n="number"==typeof t?t:(t=t||{}).precision,isNaN(r))return e;if(n=Number.isInteger(r)||void 0!==n?n||0:2,r=r.toFixed(n),!t.keepTrailingZeroes&&new RegExp(".0{"+n+"}$").test(r))return r.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+o).replace(/\.0+$/,"");var a=r.split(".");return a[0]=a[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+o),a[0]+(n?i+a[1]:"")}var o=" ",i=",";e.exports={currency:n,format:n,filter:{float:function(e,t){if([".",","].includes(e))return"0.";t=t||{maxIntegerLength:4,maxFractionLength:2};var n=(e=e.replace(/\,/g,".").replace(/[^0-9\.]/g,"")).split("."),o=n[0],i=n[1]||"";return o=o.slice(0,t.maxIntegerLength),o=/^0\d*$/.test(o)?"0":o,i=i.slice(0,t.maxFractionLength),e=/\./.test(e)?o+"."+i:o}},getCurrencyPrecision:function(e){return parseFloat(e,10)%1==0?0:2}}},41:function(e,t,n){"use strict";t.a=function(e,t,n){var o=void 0,i=void 0,r=void 0,a=void 0;return function(){for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];i=c,r=!0,a=this,o||function n(s){r?(s||e.apply(a,i),r=!1,o=setTimeout(n,t)):o=null}(n)}}},42:function(e,t,n){"use strict";var o,i,r=n(5),a=n(16),s=[".js-banner-1000x120"],c={attributes:!0,childList:!0},u=(i=o=function(e){function t(n){var o=n.$node,i=n.params;babelHelpers.classCallCheck(this,t);var r=babelHelpers.possibleConstructorReturn(this,e.call(this,{$node:o,params:i}));return r.$tooltip=r.$node.tooltip(),r.tooltipContentNode=r.componentNode.querySelector(".js-item-tooltip-content"),r.tooltipArrowNode=r.componentNode.querySelector(".js-item-tooltip-arrow"),r.initData=r.getDataFromDOM(),r.resizeWindowHandler=null,r.scrollWindowHandler=null,r.timerMark=null,r.setState({isShow:r.initData.isShow,position:r.initData.position}),r.attachEvents(),r}return babelHelpers.inherits(t,e),t.prototype.getDataFromDOM=function(){return{isShow:this.$node.is(":visible"),position:this.$node.data("position")||{}}},t.prototype.render=function(e,t){var n=this;void 0!==e.isShow&&("function"==typeof this.resizeWindowHandler&&window.removeEventListener("resize",this.resizeWindowHandler),"function"==typeof this.scrollWindowHandler&&window.removeEventListener("resize",this.scrollWindowHandler),e.isShow&&(this.resizeWindowHandler=function(){return n.setPosition(t.position)},this.scrollWindowHandler=function(){return n.setState({isShow:!1})},window.addEventListener("resize",this.resizeWindowHandler),window.addEventListener("scroll",this.scrollWindowHandler),this.componentNode.style.maxWidth=t.maxWidth?t.maxWidth+"px":"auto",this.componentNode.style.width=t.width?t.width+"px":"auto"),this.$tooltip.trigger("toggle.tooltip",e.isShow)),e.content&&(this.tooltipContentNode.innerHTML=e.content),e.position&&this.setPosition(e.position)},t.prototype.setPosition=function(e){if(void 0===e.relativeNode)return null;var n=e.relativeNode.getBoundingClientRect(),o=n.top,i=n.bottom,r=n.left,a=n.right,s=n.width,c=e.slide,u=e.offset,d=u.left,l=void 0===d?0:d,p=u.top,h=void 0===p?0:p,f=[].concat(e.side),m=f[0],v=f[1],g=this.componentNode.getBoundingClientRect(),y=0,b=0,w=0;switch(this.removeCssClasses(this.componentNode.classList,t.cssTooltipSide),m){case"bottom":y=i+h,this.componentNode.classList.add("tooltip_bottom");break;case"top":y=o-parseInt(getComputedStyle(this.componentNode).getPropertyValue("margin-top"),10)-g.height-h,this.componentNode.classList.add("tooltip_top")}if("bottom"===m||"top"===m)switch(v){case"center":b=r-g.width/2+s/2+l,w=g.width/2-l;break;case"right":b=a-g.width+l,w=g.width-s/2-l;break;default:b=r+l,w=s/2-l}var N=Math.round(y+(c?0:window.pageYOffset)),S=Math.round(b+(c?0:window.pageXOffset));return this.componentNode.style.top=(N<0?0:N)+"px",this.componentNode.style.left=(S<0?0:S)+"px",this.tooltipArrowNode&&(this.tooltipArrowNode.style.left=Math.floor(S<0?w+S:w)+"px"),this.componentNode.classList.toggle(t.cssSlideClass,Boolean(c)),null},t.prototype.show=function(e){var t=this;!0===this.getState().isShow&&this.hide();var o={side:"bottom",slide:!1,offset:{}},i=Object.assign({},o,"string"==typeof e.position?{side:e.position}:e.position);return n.i(a.a)(i.relativeNode&&1===i.relativeNode.nodeType,!1),this.setState({isShow:!0,content:e.content||null,position:i,maxWidth:e.maxWidth||null,width:e.width||null}),"number"==typeof e.autoHideTime&&(this.timerMark=setTimeout(function(){t.timerMark=null,t.setState({isShow:!1})},e.autoHideTime)),null},t.prototype.hide=function(){this.setState({isShow:!1})},t.prototype.handleNodeMutation=function(e){var t=this;new MutationObserver(function(e){for(var n=e,o=Array.isArray(n),i=0,n=o?n:n[Symbol.iterator]();;){var r;if(o){if(i>=n.length)break;r=n[i++]}else{if((i=n.next()).done)break;r=i.value}var a=r;"childList"!==a.type&&"attributes"!==a.type||t.setPosition(t.getState().position)}}).observe(e,c)},t.prototype.attachEvents=function(){var e=this;this.$tooltip.on("hide.tooltip",function(){e.timerMark&&clearTimeout(e.timerMark),e.setState({isShow:!1})}),s.forEach(function(t){var n=document.querySelector(t);n&&e.handleNodeMutation(n)})},t}(r.a),o.displayName="ItemTooltipComponent",i);u.cssSlideClass="item-tooltip_slide",u.cssTooltipSide="tooltip_",t.a=u},43:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"e",function(){return r}),n.d(t,"f",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"c",function(){return c});var o=1,i=2,r=6,a=8,s=3e3,c=11},46:function(e,t,n){"use strict";var o,i,r=n(76),a=(i=o=function(){function e(){babelHelpers.classCallCheck(this,e),this.itemAddNoteButtonNode=document.querySelector(".js-item-add-note-button"),this.itemNoteContainerNodes=Array.from(document.querySelectorAll(".js-item-view-notes")),this.itemNoteDeferredContainerNodes=Array.from(document.querySelectorAll(".js-item-view-notes-deferred")),this.addNoteHeaderNode=document.querySelector(".js-add-note-header"),this.activateNoteInputEvent=new CustomEvent("activateNoteInput"),this.scrollToNode=document.querySelector(".js-breadcrumbs-link"),this.attachEvents()}return e.prototype.attachEvents=function(){var e=this;this.itemAddNoteButtonNode&&(this.itemAddNoteButtonNode.classList.contains("js-item-tooltip-trigger")?(avito.tracking.trackGTMEvent("noteButton","show","not_authorized","value"),this.itemAddNoteButtonNode.addEventListener("click",function(){avito.tracking.trackGTMEvent("noteButton","click","not_authorized","value")})):avito.tracking.trackGTMEvent("noteButton","show","authorized","value"),this.itemAddNoteButtonNode.addEventListener("switchAddNoteButton",function(t){e.itemAddNoteButtonNode.classList.toggle("hidden",!t.detail.isVisible)})),this.itemNoteContainerNodes.forEach(function(e){e.addEventListener("switchNotesContainer",function(t){e.classList.toggle("hidden",!t.detail.isVisible)})}),this.itemNoteDeferredContainerNodes.forEach(function(e){e.addEventListener("switchNotesContainer",function(t){e.classList.toggle("hidden",!t.detail.isVisible)})}),this.addNoteHeaderNode&&this.scrollToNode&&this.addNoteHeaderNode.addEventListener("click",function(){r.a({node:e.scrollToNode}),setTimeout(function(){e.itemAddNoteButtonNode.dispatchEvent(e.activateNoteInputEvent)},450)})},e}(),o.displayName="ItemNotes",i);t.a=a},47:function(e,t,n){"use strict";var o,i,r=(i=o=function(e){function t(n){var o=n.$node,i=n.params;babelHelpers.classCallCheck(this,t);var r=babelHelpers.possibleConstructorReturn(this,e.call(this,{$node:o,params:i}));return r.alertItemNodeArray=Array.from(r.componentNode.querySelectorAll(".js-slide-alert-item")),r.setState({itemsData:r.getDataFromDOM().itemsData}),r.alertItemNodeArray.forEach(function(e){r.initEvent(e)}),r}return babelHelpers.inherits(t,e),t.itemAlertTemplate=function(e){var n=e.id,o=e.message,i=e.alertShow,r=e.autoHideTimeAlert,a=e.alertType;return'<div class="slide-alert-item js-slide-alert-item '+t.typeCssMods+a+'" data-index="'+n+'" data-auto-hide-time="'+r+'" data-is-show="'+i+'">\n            <div class="slide-alert-layout">\n                <div class="slide-alert-content js-slide-alert-content">'+o+'</div>\n                <div class="slide-alert-close js-slide-alert-close"></div>\n            </div>\n        </div>'},t.prototype.getDataFromDOM=function(){return{itemsData:this.alertItemNodeArray.map(function(e){var t=e.dataset,n=parseInt(t.autoHideTime||0,10);return{isShow:Boolean(parseInt(t.isShow||0,10)),autoHideTime:0===n?null:n,timeMark:null,id:t.index}})}},t.prototype.render=function(e){var n=this;if(e.itemsData){var o=e.itemsData.map(function(e){var o=n.componentNode.querySelector('.js-slide-alert-item[data-index="'+e.id+'"]');if(o||(o=n.createNewAlertItem(e)),void 0!==e.isShow){if(setTimeout(function(){o.classList.toggle(t.showCssClass,e.isShow)}),!1===e.isShow)return o.addEventListener("transitionend",function(){var e=o.parentNode;e&&e.removeChild(o)}),!1;!0===e.isShow&&"number"==typeof e.autoHideTime&&null===e.timeMark&&(e.timeMark=setTimeout(function(){n.hide(e.id)},e.autoHideTime))}return e}).filter(Boolean);this.state.set({itemsData:o})}},t.prototype.createNewAlertItem=function(e){var n=e.id,o=e.isShow,i=e.message,r=e.autoHideTime,a=e.type,s=t.itemAlertTemplate({id:n,message:i,alertShow:o,autoHideTimeAlert:r,alertType:a});this.componentNode.insertAdjacentHTML("beforeEnd",s);var c=this.componentNode.querySelector(".js-slide-alert-item:last-child");return this.initEvent(c),c},t.prototype.initEvent=function(e){var t=this,n=e.querySelector(".js-slide-alert-close");n&&n.addEventListener("click",function(){var n=e.dataset.index;t.hide(n)})},t.prototype.show=function(e){var t=e.type,n=void 0===t?"default":t,o=e.autoHideTime,i=e.message,r=e.name,a=this.getState("itemsData");a.push({isShow:!0,type:n,autoHideTime:o,message:i,timeMark:null,id:r||Math.floor(1e5*Math.random()).toString()}),this.setState({itemsData:[].concat(a)})},t.prototype.hide=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.getState("itemsData").reduce(function(t,n){return null!==e&&n.id!==e||(n.isShow=!1,n.timerMark&&(clearTimeout(n.timerMark),n.timerMark=null)),t.push(n),t},[]);this.setState({itemsData:t})},t}(n(5).a),o.displayName="SlideAlertComponent",i);r.showCssClass="slide-alert-item_state-show",r.typeCssMods="slide-alert-item_type-",t.a=r},48:function(e,t,n){"use strict";var o,i,r=n(72),a=(i=o=function(e){function t(n){var o=n.container;return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,e.call(this,{container:o,createView:function(){return new r.a({container:o})}}))}return babelHelpers.inherits(t,e),t.prototype.togglePopup=function(e){this.npsView&&(e?this.npsView.showPopup():this.npsView.hidePopup())},t.prototype.init=function(){var t=this;e.prototype.init.call(this).then(function(){$.mediator.on("popup:showed",t.npsView.hidePopup).on("mapOpened",t.npsView.hidePopup).on("popup:hidden",t.npsView.showPopup).on("mapClosed",t.npsView.showPopup)}).catch(function(e){if(e instanceof Error)throw e})},t}(n(73).a),o.displayName="NpsDesktopController",i);t.a=a},5:function(e,t,n){"use strict";var o,i,r=n(16),a=n(24),s=(i=o=function(){function e(t){var n=this,o=t.$node,i=t.params;babelHelpers.classCallCheck(this,e),this.state=new a.a({}),this.$node=o,this.emitter=$({}),this.componentNode=this.$node.get(0),i&&(this.sharedState=i.sharedState),this.emitter.on("change",function(e,t){n.render(t,n.getState())})}return e.prototype.publishChanges=function(e){Object.keys(e).length&&this.emitter.trigger("change",[e])},e.prototype.getState=function(){var e;return(e=this.state).get.apply(e,arguments)},e.prototype.setState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};this.state?n=this.state.set(e):(this.state=new a.a(e),n=babelHelpers.extends({},e)),!1===t&&this.publishChanges(n)},e.prototype.render=function(){n.i(r.a)(!1,!1)},e.prototype.getDataFromDOM=function(){return{}},e.prototype.removeCssClasses=function(e,t){var n=e,o=t;void 0===t&&(n=this.componentNode.classList,o=e);var i=new RegExp("^"+o+"[a-zA-Z0-9-]+$");Array.from(n).filter(function(e){return i.test(e)}).forEach(function(e){return n.remove(e)})},e}(),o.displayName="BaseComponent",i);t.a=s},67:function(e,t,n){"use strict";var o=n(32),i=(n.n(o),n(34)),r=(n.n(i),n(33)),a=n.n(r);n.d(t,"a",function(){return a.a})},72:function(e,t,n){"use strict";var o,i,r=n(75),a=n(43),s=(i=o=function(){function e(t){babelHelpers.classCallCheck(this,e),this.container=t.container,this.state={isShowedSecondaryQuestion:!1},this.hidePopup=this.hidePopup.bind(this),this.showPopup=this.showPopup.bind(this),this.emitter=new r.a}return e.getAlertTemplate=function(e){return'<div class="nps-survey-alert">\n                '+e.message+"\n            </div>"},e.getItems=function(){return Array.from(Array(a.c).keys()).map(function(e){return'<label class="form-radio-group__label">\n                    <input type="radio" name="probability" value="'+e+'">\n                    <span class="form-radio-group__item js-probability-value" data-probability-value="'+e+'">'+e+"</span>\n                </label>"}).join("")},e.prototype.init=function(){this.render(),this.initNodes(),this.attachEventHandlers()},e.prototype.on=function(e,t){return this.emitter.on(e,t),this},e.prototype.getFilledUpData=function(){var e={},t=this.secondaryAnswerNode.value;return this.currentProbability>=0&&(e.answerPoints=this.currentProbability),t&&(e.answerText=t),e},e.prototype.sendHandler=function(){this.emitter.trigger("send",this.getFilledUpData()),this.showAlert({message:"Большое спасибо!"})},e.prototype.closeHandler=function(){this.state.isShowingAlert||this.emitter.trigger("close",this.getFilledUpData()),this.closePopup()},e.prototype.render=function(){var t=avito.simpleTemplate(document.getElementById("template-nps-survey").innerHTML);this.container.insertAdjacentHTML("beforeend",t.render({primaryQuestion:this.questions.primary,items:e.getItems(),responseMaxLength:this.responseMaxLength,leftPhrase:this.sliderCaption.leftPhrase,rightPhrase:this.sliderCaption.rightPhrase}))},e.prototype.initNodes=function(){this.npsSurveyNode=document.querySelector(".js-nps-survey"),this.npsSurveyContentNode=this.npsSurveyNode.querySelector(".js-nps-survey-content"),this.npsSurveyQuestionsNode=this.npsSurveyNode.querySelector(".js-nps-survey-questions"),this.probabilityNode=this.npsSurveyNode.querySelector(".js-nps-survey-primary-question-probability"),this.secondaryQuestionNode=this.npsSurveyNode.querySelector(".js-nps-survey-secondary-question"),this.secondaryQuestionTextNode=this.npsSurveyNode.querySelector(".js-nps-survey-secondary-question-text"),this.secondaryAnswerNode=this.npsSurveyNode.querySelector(".js-nps-survey-secondary-answer"),this.sendButtonNode=this.npsSurveyNode.querySelector(".js-nps-survey-button-send"),this.closeButtonNode=this.npsSurveyNode.querySelector(".js-nps-survey-button-close")},e.prototype.resizeWindowHandler=function(){this.state.isHiddenPopup||(this.state.isShowedSecondaryQuestion&&(this.calculateMaxSecondaryAnswerNodeHeight(),this.autoResizeInputHeight()),this.changePopupHeight())},e.prototype.attachMouseWheelHandler=function(){this.npsSurveyContentNode.addEventListener("mousewheel",function(e){var t=e.target.classList.contains("js-nps-survey-secondary-answer")?e.target:this,n=t.scrollHeight,o=t.offsetHeight,i=t.scrollTop;(n-o-i<=1&&e.wheelDelta<0||0===i&&e.wheelDelta>0)&&e.preventDefault()})},e.prototype.attachEventHandlers=function(){window.addEventListener("resize",this.resizeWindowHandler.bind(this)),this.probabilityNode.addEventListener("click",this.selectProbabilityHandler.bind(this)),this.closeButtonNode.addEventListener("click",this.closeHandler.bind(this)),this.sendButtonNode.addEventListener("click",this.sendHandler.bind(this)),this.secondaryAnswerNode.addEventListener("input",this.autoResizeInputHeight.bind(this)),this.attachMouseWheelHandler()},e.prototype.hidePopup=function(){this.npsSurveyNode.style.webkitTransform=this.npsSurveyNode.style.transform="",$.mediator.trigger("changeNPSPopupHeight",{offset:0}),this.state.isHiddenPopup=!0},e.prototype.showPopup=function(){var e=this;setTimeout(function(){e.state.isHiddenPopup||e.changePopupHeight(e.currentHeight)},1e3),this.state.isHiddenPopup=!1},e.prototype.calculateMaxSecondaryAnswerNodeHeight=function(){var e=this.secondaryAnswerNode.offsetHeight;this.maxSecondaryAnswerNodeHeight=this.npsSurveyNode.offsetHeight-this.npsSurveyQuestionsNode.offsetHeight+e,this.maxSecondaryAnswerNodeHeight<this.minSecondaryAnswerNodeHeight&&(this.maxSecondaryAnswerNodeHeight=this.minSecondaryAnswerNodeHeight)},e.prototype.autoResizeInputHeight=function(){var e=this.secondaryAnswerNode,t=e.offsetHeight;e.style.height="0";var n=e.scrollHeight+e.offsetHeight+25;n>this.maxSecondaryAnswerNodeHeight?n=this.maxSecondaryAnswerNodeHeight:n<this.minSecondaryAnswerNodeHeight&&(n=this.minSecondaryAnswerNodeHeight),e.style.height=n+"px",n!==t&&this.changePopupHeight()},e.prototype.changePopupHeight=function(e){var t=this.npsSurveyQuestionsNode.offsetHeight;this.currentHeight=e||this.npsSurveyNode.offsetHeight-t,this.currentHeight<0&&(t=this.npsSurveyNode.offsetHeight,this.currentHeight=0),this.npsSurveyNode.style.webkitTransform=this.npsSurveyNode.style.transform="translateY("+this.currentHeight+"px)",$.mediator.trigger("changeNPSPopupHeight",{offset:t})},e.prototype.showPrimaryQuestion=function(){this.changePopupHeight()},e.prototype.closePopup=function(){var e=this;this.npsSurveyQuestionsNode.remove(),this.changePopupHeight(),this.npsSurveyNode.addEventListener("transitionend",function(t){t.target.classList.contains("js-nps-survey")&&e.npsSurveyNode.remove()})},e.prototype.openPopup=function(){this.init(),this.state.isHiddenPopup||this.showPrimaryQuestion()},e.prototype.showAlert=function(t){this.npsSurveyQuestionsNode.style.padding="0",this.npsSurveyQuestionsNode.innerHTML=e.getAlertTemplate({message:t.message}),this.state.isShowingAlert=!0,this.changePopupHeight(),setTimeout(this.closePopup.bind(this),a.d)},e.prototype.selectProbabilityHandler=function(e){if(e.target.classList.contains("js-probability-value")){var t=parseInt(e.target.dataset.probabilityValue,10);t!==this.currentProbability&&(this.currentProbability=t,this.state.isShowedSecondaryQuestion||this.showSecondaryQuestion(),this.changeSecondaryQuestion())}},e.prototype.changeSecondaryQuestion=function(){var e=this.questions.promoter;this.currentProbability<=a.e?e=this.questions.detractor:this.currentProbability<=a.f&&(e=this.questions.neutral),this.secondaryQuestionTextNode.innerHTML=e,this.calculateMaxSecondaryAnswerNodeHeight(),this.autoResizeInputHeight(),this.changePopupHeight()},e.prototype.showSecondaryQuestion=function(){this.secondaryQuestionNode.classList.remove("nps-survey-secondary-question_hidden"),this.sendButtonNode.classList.remove("nps-survey-button-send_hidden"),this.minSecondaryAnswerNodeHeight=this.secondaryAnswerNode.offsetHeight,this.state.isShowedSecondaryQuestion=!0},e}(),o.displayName="NpsDesktopView",i);t.a=s},73:function(e,t,n){"use strict";function o(e){return Object.keys(e).forEach(function(t){e[t]=e[t].replace(/(\r\n|\n|\r)/g,"<br>")}),e}var i,r,a=n(74),s=n(43),c=(r=i=function(){function e(t){var n=t.container,o=t.createView;babelHelpers.classCallCheck(this,e),this.container=n,this.createView=o}return e.prototype.init=function(){var e=this;return new Promise(function(t,n){if(e.container){var i=e.container.dataset,r=i.currentPage,c=i.categoryId,u={pageType:r};c&&(u.categoryId=c),a.a.getSurvey(u).then(function(n){var i,r=n.surveyId,a=n.responseId,c=n.version,u=n.token,d=n.tokenName,l=n.questions,p=n.responseMaxLength,h=n.phrases,f=(i={surveyId:r,responseId:a,version:c},i[d]=u,i);e.npsView=e.createView(),e.npsView.questions=o(l),e.npsView.responseMaxLength=p,e.npsView.sliderCaption=h,e.npsView.on("send",e.getHandler(babelHelpers.extends({resultState:s.a},f)).bind(e)).on("close",e.getHandler(babelHelpers.extends({resultState:s.b},f)).bind(e)),e.npsView.openPopup(),t()}).catch(function(e){if(e instanceof Error)throw e})}else n()})},e.prototype.getHandler=function(e){return function(t){a.a.sendSurveyData(babelHelpers.extends({},e,t))}},e}(),i.displayName="NpsBaseController",r);t.a=c},74:function(e,t,n){"use strict";var o,i,r,a,s=(i=o=function(){function e(){babelHelpers.classCallCheck(this,e)}return e.getId=function(e){return"survey_id_"+e},e.get=function(t){var n=void 0;try{n=localStorage.getItem(e.getId(t))}catch(e){}return n},e.add=function(t,n){try{localStorage.setItem(e.getId(t),JSON.stringify(n))}catch(e){}},e.remove=function(t){try{localStorage.removeItem(e.getId(t))}catch(e){}},e}(),o.displayName="SurveyStorage",i),c=(a=r=function(){function e(){babelHelpers.classCallCheck(this,e)}return e.fetchHelper=function(e){var t=e.params,n=e.url,o={method:"post",credentials:"same-origin",headers:new Headers({"X-Requested-With":"XMLHttpRequest"})},i=new FormData;return Object.keys(t).forEach(function(e){i.append(e,t[e])}),o.body=i,fetch(n,o)},e.sendSurveyData=function(t){e.fetchHelper({params:t,url:"/survey/save"}).catch(function(){s.add(t.surveyId,t)})},e.sendUnsentSurveyData=function(t,n){e.fetchHelper({url:"/survey/save",params:babelHelpers.extends({},JSON.parse(n),{surveyId:t})}),s.remove(t)},e.getSurvey=function(t){return new Promise(function(n,o){e.fetchHelper({params:t,url:"/survey/get/suitable"}).then(function(e){return e.json()}).then(function(t){if(Array.isArray(t))o();else{var i=t,r=i.id,a=i.responseId,c=i.version,u=i.responseMaxLength,d=i.tokenName,l=i.token,p=i.template,h=s.get(r);if(h)return e.sendUnsentSurveyData(r,h),void o();var f=p.primaryText,m=p.detractorText,v=p.neutralText,g=p.promoterText,y=p.leftPhrase,b=p.rightPhrase;n(t={surveyId:r,responseId:a,version:c,responseMaxLength:u,questions:{primary:f,detractor:m,neutral:v,promoter:g},phrases:{leftPhrase:y,rightPhrase:b},tokenName:d,token:l})}})})},e}(),r.displayName="NpsCore",a);t.a=c},75:function(e,t,n){"use strict";var o,i,r=(i=o=function(){function e(){babelHelpers.classCallCheck(this,e),this.handlers={}}return e.prototype.on=function(e,t){this.handlers[e]?this.handlers[e].push(t):this.handlers[e]=[t]},e.prototype.trigger=function(e,t){var n=this.handlers[e];n&&n.forEach(function(e){e(t)})},e}(),o.displayName="Emitter",i);t.a=r},76:function(e,t,n){"use strict";t.a=function(e){var t=e.node.getBoundingClientRect();window.scrollTo({behavior:"smooth",top:t.top+window.pageYOffset-10,left:0})}},77:function(e,t,n){"use strict";var o,i,r=(i=o=function(){function e(t){var n=t.server,o=t.seqId,i=t.token;babelHelpers.classCallCheck(this,e),this.server=n,this.seqId=o||1,this.odd=o%2,this.token=i}return e.prototype.request=function(e,t){return this.fetching({method:e,params:t})},e.prototype.notify=function(e,t){return this.fetching({method:e,params:t},!0)},e.prototype.fetching=function(e,t){var n=this,o=e.method,i=e.params,r=void 0===i?{}:i,a={jsonrpc:"2.0",method:o.replace(/\//g,"."),params:r};return t||(a.id=this.generateId(),a.uid=Date.now()+"-"+Math.random().toString(36).substring(0,10)),this.token&&(a.params.token=this.token),new Promise(function(e,t){fetch(n.server,{method:"post",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){if(e.status>=200&&e.status<300)return-1!==e.headers.get("content-type").indexOf("application/json")?e.json():e.text();var t=new Error(e.statusText);throw t.responseOriginal=e,t}).then(function(t){t.error||(n.checkToken(t),e(t.result));var o=new Error(t.statusText);throw o.response=t,o}).catch(function(e){e.responseOriginal?e.responseOriginal.json().then(function(e){n.checkToken(e),t(e.error)}):t(e.response?e.response.error:{})})})},e.prototype.checkToken=function(e){e.token&&(this.token=e.token)},e.prototype.setToken=function(e){this.token=e},e.prototype.generateId=function(){var e=this.seqId;return this.seqId+=2,this.seqId>Number.MAX_SAFE_INTEGER&&(this.seqId=Number.MIN_SAFE_INTEGER+(this.odd?0:1)),e},e}(),o.displayName="Client",i);t.a=r},78:function(e,t,n){"use strict";t.a=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("&").reduce(function(e,t){if(!t)return e;var n=t.split("=").map(decodeURIComponent),o=n[0],i=n[1],r=o.match(/^(\w+)(\[((\w|-)*)\])?$/)||[],a=r[1],s=r[2],c=r[3];if(!a)throw new Error("Key `"+o+"` has invalid format");var u=s&&!c;return!e[a]&&s&&(e[a]=u?[]:{}),c?e[a][c]=i:u?e[a].push(i):e[a]=i,e},{})}}}),function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/s/build/",t(t.s=314)}({314:function(e,t){var n,o,i=(o=n=function e(t){var n=this,o=t.sliderNode;babelHelpers.classCallCheck(this,e),this.initNodes=function(){n.sliderWrapperNode=n.sliderNode.querySelector(".js-popular-query-slider-wrapper"),n.prevButtonNode=n.sliderNode.querySelector(".js-popular-query-slider-button_prev"),n.nextButtonNode=n.sliderNode.querySelector(".js-popular-query-slider-button_next")},this.init=function(){n.maxScrollPosition=n.sliderWrapperNode.scrollWidth-n.sliderWrapperNode.offsetWidth,n.maxScrollPosition<=1||(n.nextButtonNode.classList.remove("popular-query-slider-button_hidden"),n.attachEventHandlers())},this.attachEventHandlers=function(){n.sliderWrapperNode.addEventListener("scroll",function(e){var t=e.target.scrollLeft;n.nextButtonNode.classList.toggle("popular-query-slider-button_hidden",t===n.maxScrollPosition),n.prevButtonNode.classList.toggle("popular-query-slider-button_hidden",0===t)}),n.prevButtonNode.addEventListener("click",function(){n.changeScrollPosition(Math.max(0,n.sliderWrapperNode.scrollLeft-350))}),n.nextButtonNode.addEventListener("click",function(){n.changeScrollPosition(Math.min(n.maxScrollPosition,n.sliderWrapperNode.scrollLeft+350))})},this.changeScrollPosition=function(e){var t=n.sliderWrapperNode.scrollLeft,o=e-t,i=void 0,r=0;requestAnimationFrame(function e(a){void 0===i&&(i=a),r+=(a-i)/300,n.sliderWrapperNode.scrollLeft=t+o*r,r>=1||(i=a,requestAnimationFrame(e))})},this.sliderNode=o,this.initNodes(),this.init()},n.displayName="PopularQueris",o);document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".js-popular-query-slider");e&&new i({sliderNode:e})})}}),function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/s/build/",t(t.s=313)}({11:function(e,t,n){"use strict";function o(e,t){return[e,t].map(encodeURIComponent).join("=")}function i(e,t){var n=encodeURIComponent(e);return Object.keys(t).map(function(e){var o=[e,t[e]].map(encodeURIComponent),i=o[0],r=o[1];return n+"["+i+"]="+r}).join("&")}function r(e,t){var n=encodeURIComponent(e);return t.map(function(e){return n+"[]="+encodeURIComponent(e)}).join("&")}var a=n(15);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(function(t){var s=e[t];return Array.isArray(s)?r(t,s):n.i(a.a)(s)?i(t,s):o(t,s)}).join("&")}},12:function(e,t,n){"use strict";var o=n(11);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/events/add",i={};Object.keys(e).forEach(function(t){var n=e[t];void 0!==n&&null!==n&&(i[t]=n)});var r=n.i(o.a)(i);return fetch(t,{method:"post",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:r}).then(function(e){return e.status>=400?Promise.reject(e):e})}},15:function(e,t,n){"use strict";t.a=function(e){return e&&"object"===(void 0===e?"undefined":babelHelpers.typeof(e))&&e.constructor===Object}},313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(12);document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".js-popular-categories"),t=document.querySelector(".js-popular-category_expand"),i=document.querySelector(".js-catalog-counts__section");t&&t.addEventListener("click",function(){i.classList.remove("catalog-counts__section_hidden"),e.classList.add("popular-categories_hidden"),n.i(o.a)({version:0,eid:2632})})})}}),function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/s/build/",t(t.s=312)}({11:function(e,t,n){"use strict";function o(e,t){return[e,t].map(encodeURIComponent).join("=")}function i(e,t){var n=encodeURIComponent(e);return Object.keys(t).map(function(e){var o=[e,t[e]].map(encodeURIComponent),i=o[0],r=o[1];return n+"["+i+"]="+r}).join("&")}function r(e,t){var n=encodeURIComponent(e);return t.map(function(e){return n+"[]="+encodeURIComponent(e)}).join("&")}var a=n(15);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(function(t){var s=e[t];return Array.isArray(s)?r(t,s):n.i(a.a)(s)?i(t,s):o(t,s)}).join("&")}},12:function(e,t,n){"use strict";var o=n(11);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/events/add",i={};Object.keys(e).forEach(function(t){var n=e[t];void 0!==n&&null!==n&&(i[t]=n)});var r=n.i(o.a)(i);return fetch(t,{method:"post",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:r}).then(function(e){return e.status>=400?Promise.reject(e):e})}},15:function(e,t,n){"use strict";t.a=function(e){return e&&"object"===(void 0===e?"undefined":babelHelpers.typeof(e))&&e.constructor===Object}},16:function(e,t,n){"use strict";t.a=function(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];var r=void 0;if(!e){if(t){var a=0;r=new Error("Invariant: "+t.replace(/%s/g,function(){var e=o[a];return a+=1,e}))}else r=new Error("Произошла ошибка! Запустите код в development-режиме, чтобы узнать детали");throw r}}},24:function(e,t,n){"use strict";var o,i,r=(i=o=function(){function e(t){babelHelpers.classCallCheck(this,e),this.state=babelHelpers.extends({},t)}return e.prototype.get=function(e){return void 0===e?babelHelpers.extends({},this.state):this.state[e]},e.prototype.set=function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o={};return Object.keys(e).forEach(function(i){n&&t.state[i]===e[i]||(o[i]=e[i],t.state[i]=e[i])}),o},e}(),o.displayName="Dataset",i);t.a=r},312:function(e,t,n){"use strict";function o(){if(h){var e=h,t=e.vasNode,n=e.hoverClassName;t.classList.remove(n)}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),r=n(42),a={position:{side:["bottom","center"],offset:{top:10},slide:!1},maxWidth:210,autoHideTime:1e4},s=function(e){return"Поднято "+e.date+" в "+e.time},c=function(e){return'<a title="Объявление поднято в поиске '+e.date+" в "+e.time+'" class="icon-link js-new-window"\n        href="https://support.avito.ru/articles/200026828" rel="nofollow" target="_blank" data-vas-type="pushup">\n        <i class="monetization-icon monetization-icon_xs monetization-icon_vas-pushup"></i>\n        &nbsp;Поднято\n    </a>'},u=function(e){return'<a title="Выделенное объявление" class="icon-link js-new-window"\n        href="https://support.avito.ru/articles/'+("right"===e.pricePosition?"715":"716")+'" rel="nofollow" target="_blank" data-vas-type="highlight">\n        <i class="monetization-icon monetization-icon_xs monetization-icon_vas-highlight_blue"></i>\n        &nbsp;Выделено\n    </a>'},d=function(e){return'<p class="vas-item">\n        '+e+"\n    </p>"},l=function(e){return'<div class="vas-list">\n        '+e+"\n    </div>"},p=null,h=null,f=null,m=function(e){var t=e.target.closest("[data-vas-type]");t&&n.i(i.a)({version:0,eid:2645,vas_type:t.dataset.vasType})};document.addEventListener("DOMContentLoaded",function(){var e=$(".js-vas-tooltip");if(0!==e.length)(f=new r.a({$node:e})).$tooltip.on("hide.tooltip",function(){var e=p,t=e.vasNode,n=e.hoverClassName;t.classList.remove(n)}),e.get(0).addEventListener("click",m),Array.from(document.querySelectorAll(".js-vas-list-container")).forEach(function(e){e.addEventListener("mouseenter",function(t){var r=t.target,m=JSON.parse(r.dataset.config),v=m.isOnlyUpped,g=m.isLessTwoVAS,y=m.isPremium,b=m.isVip,w=m.isUrgent,N=m.isUpped,S="high";v?S="low":g&&(S="middle");var k="monetization-icon_vas-up-"+S+"_hover";if(!r.classList.contains(k)){n.i(i.a)({version:0,eid:2644}),f.hide(),o(),h=p,p={vasNode:e,hoverClassName:k},r.classList.add(k);var j="";v?j=d(s(m)):(y&&(j+=d('<a title="Премиум-объявление" class="icon-link js-new-window"\n        href="https://support.avito.ru/articles/722" rel="nofollow" target="_blank" data-vas-type="premium">\n        <i class="monetization-icon monetization-icon_xs monetization-icon_vas-premium"></i>\n        &nbsp;Премиум\n    </a>')),b&&(j+=d('<a title="VIP-объявление" class="icon-link js-new-window"\n        href="https://support.avito.ru/articles/200026848" rel="nofollow" target="_blank" data-vas-type="vip">\n        <i class="monetization-icon monetization-icon_xs monetization-icon_vas-vip"></i>\n        &nbsp;VIP\n    </a>')),w&&(j+=d(u(m))),N&&(j+=d(c(m)))),a.position.relativeNode=r,a.content=l(j),f.show(a)}})});else{var t=document.querySelector(".js-catalog-list");t&&t.addEventListener("click",m)}})},42:function(e,t,n){"use strict";var o,i,r=n(5),a=n(16),s=[".js-banner-1000x120"],c={attributes:!0,childList:!0},u=(i=o=function(e){function t(n){var o=n.$node,i=n.params;babelHelpers.classCallCheck(this,t);var r=babelHelpers.possibleConstructorReturn(this,e.call(this,{$node:o,params:i}));return r.$tooltip=r.$node.tooltip(),r.tooltipContentNode=r.componentNode.querySelector(".js-item-tooltip-content"),r.tooltipArrowNode=r.componentNode.querySelector(".js-item-tooltip-arrow"),r.initData=r.getDataFromDOM(),r.resizeWindowHandler=null,r.scrollWindowHandler=null,r.timerMark=null,r.setState({isShow:r.initData.isShow,position:r.initData.position}),r.attachEvents(),r}return babelHelpers.inherits(t,e),t.prototype.getDataFromDOM=function(){return{isShow:this.$node.is(":visible"),position:this.$node.data("position")||{}}},t.prototype.render=function(e,t){var n=this;void 0!==e.isShow&&("function"==typeof this.resizeWindowHandler&&window.removeEventListener("resize",this.resizeWindowHandler),"function"==typeof this.scrollWindowHandler&&window.removeEventListener("resize",this.scrollWindowHandler),e.isShow&&(this.resizeWindowHandler=function(){return n.setPosition(t.position)},this.scrollWindowHandler=function(){return n.setState({isShow:!1})},window.addEventListener("resize",this.resizeWindowHandler),window.addEventListener("scroll",this.scrollWindowHandler),this.componentNode.style.maxWidth=t.maxWidth?t.maxWidth+"px":"auto",this.componentNode.style.width=t.width?t.width+"px":"auto"),this.$tooltip.trigger("toggle.tooltip",e.isShow)),e.content&&(this.tooltipContentNode.innerHTML=e.content),e.position&&this.setPosition(e.position)},t.prototype.setPosition=function(e){if(void 0===e.relativeNode)return null;var n=e.relativeNode.getBoundingClientRect(),o=n.top,i=n.bottom,r=n.left,a=n.right,s=n.width,c=e.slide,u=e.offset,d=u.left,l=void 0===d?0:d,p=u.top,h=void 0===p?0:p,f=[].concat(e.side),m=f[0],v=f[1],g=this.componentNode.getBoundingClientRect(),y=0,b=0,w=0;switch(this.removeCssClasses(this.componentNode.classList,t.cssTooltipSide),m){case"bottom":y=i+h,this.componentNode.classList.add("tooltip_bottom");break;case"top":y=o-parseInt(getComputedStyle(this.componentNode).getPropertyValue("margin-top"),10)-g.height-h,this.componentNode.classList.add("tooltip_top")}if("bottom"===m||"top"===m)switch(v){case"center":b=r-g.width/2+s/2+l,w=g.width/2-l;break;case"right":b=a-g.width+l,w=g.width-s/2-l;break;default:b=r+l,w=s/2-l}var N=Math.round(y+(c?0:window.pageYOffset)),S=Math.round(b+(c?0:window.pageXOffset));return this.componentNode.style.top=(N<0?0:N)+"px",this.componentNode.style.left=(S<0?0:S)+"px",this.tooltipArrowNode&&(this.tooltipArrowNode.style.left=Math.floor(S<0?w+S:w)+"px"),this.componentNode.classList.toggle(t.cssSlideClass,Boolean(c)),null},t.prototype.show=function(e){var t=this;!0===this.getState().isShow&&this.hide();var o={side:"bottom",slide:!1,offset:{}},i=Object.assign({},o,"string"==typeof e.position?{side:e.position}:e.position);return n.i(a.a)(i.relativeNode&&1===i.relativeNode.nodeType,!1),this.setState({isShow:!0,content:e.content||null,position:i,maxWidth:e.maxWidth||null,width:e.width||null}),"number"==typeof e.autoHideTime&&(this.timerMark=setTimeout(function(){t.timerMark=null,t.setState({isShow:!1})},e.autoHideTime)),null},t.prototype.hide=function(){this.setState({isShow:!1})},t.prototype.handleNodeMutation=function(e){var t=this;new MutationObserver(function(e){for(var n=e,o=Array.isArray(n),i=0,n=o?n:n[Symbol.iterator]();;){var r;if(o){if(i>=n.length)break;r=n[i++]}else{if((i=n.next()).done)break;r=i.value}var a=r;"childList"!==a.type&&"attributes"!==a.type||t.setPosition(t.getState().position)}}).observe(e,c)},t.prototype.attachEvents=function(){var e=this;this.$tooltip.on("hide.tooltip",function(){e.timerMark&&clearTimeout(e.timerMark),e.setState({isShow:!1})}),s.forEach(function(t){var n=document.querySelector(t);n&&e.handleNodeMutation(n)})},t}(r.a),o.displayName="ItemTooltipComponent",i);u.cssSlideClass="item-tooltip_slide",u.cssTooltipSide="tooltip_",t.a=u},5:function(e,t,n){"use strict";var o,i,r=n(16),a=n(24),s=(i=o=function(){function e(t){var n=this,o=t.$node,i=t.params;babelHelpers.classCallCheck(this,e),this.state=new a.a({}),this.$node=o,this.emitter=$({}),this.componentNode=this.$node.get(0),i&&(this.sharedState=i.sharedState),this.emitter.on("change",function(e,t){n.render(t,n.getState())})}return e.prototype.publishChanges=function(e){Object.keys(e).length&&this.emitter.trigger("change",[e])},e.prototype.getState=function(){var e;return(e=this.state).get.apply(e,arguments)},e.prototype.setState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};this.state?n=this.state.set(e):(this.state=new a.a(e),n=babelHelpers.extends({},e)),!1===t&&this.publishChanges(n)},e.prototype.render=function(){n.i(r.a)(!1,!1)},e.prototype.getDataFromDOM=function(){return{}},e.prototype.removeCssClasses=function(e,t){var n=e,o=t;void 0===t&&(n=this.componentNode.classList,o=e);var i=new RegExp("^"+o+"[a-zA-Z0-9-]+$");Array.from(n).filter(function(e){return i.test(e)}).forEach(function(e){return n.remove(e)})},e}(),o.displayName="BaseComponent",i);t.a=s}}),function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/s/build/",t(t.s=310)}({11:function(e,t,n){"use strict";function o(e,t){return[e,t].map(encodeURIComponent).join("=")}function i(e,t){var n=encodeURIComponent(e);return Object.keys(t).map(function(e){var o=[e,t[e]].map(encodeURIComponent),i=o[0],r=o[1];return n+"["+i+"]="+r}).join("&")}function r(e,t){var n=encodeURIComponent(e);return t.map(function(e){return n+"[]="+encodeURIComponent(e)}).join("&")}var a=n(15);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(function(t){var s=e[t];return Array.isArray(s)?r(t,s):n.i(a.a)(s)?i(t,s):o(t,s)}).join("&")}},12:function(e,t,n){"use strict";var o=n(11);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/events/add",i={};Object.keys(e).forEach(function(t){var n=e[t];void 0!==n&&null!==n&&(i[t]=n)});var r=n.i(o.a)(i);return fetch(t,{method:"post",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:r}).then(function(e){return e.status>=400?Promise.reject(e):e})}},15:function(e,t,n){"use strict";t.a=function(e){return e&&"object"===(void 0===e?"undefined":babelHelpers.typeof(e))&&e.constructor===Object}},310:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(12);document.addEventListener("DOMContentLoaded",function(){Array.from(document.querySelectorAll(".js-item-date")).forEach(function(e){var t=!1;e.addEventListener("mouseenter",function(e){var i=e.target,r=i.dataset.absoluteDate;r&&(t=!0,setTimeout(function(){t&&(i.textContent=r,n.i(o.a)({version:0,eid:2693}))},300))}),e.addEventListener("mouseleave",function(e){var n=e.target,o=n.dataset.relativeDate;o&&(t=!1,n.textContent=o)})})})}});