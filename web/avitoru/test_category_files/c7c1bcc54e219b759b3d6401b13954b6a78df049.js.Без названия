!function(e){function t(){var e,n;s=clearTimeout(s),h&&((n=v.splice(0,10)).length&&((e=new XMLHttpRequest).open("POST",h,!0),e.setRequestHeader("content-type","application/json"),e.onreadystatechange=function(){4!==e.readyState||s||(s=setTimeout(t,m))},e.send(JSON.stringify(n)),u&&u(n)),v.length&&(s=setTimeout(t,f)))}function n(e){try{throw e}catch(e){return e.stack}}function r(e){try{var t,n,r=e.callee&&e.callee.caller;if(r){for(t=[];r&&r.arguments&&t.length<10;)(n=r.toString().match(p))?t.push((r.name||n[1])+"("+n[2]+")"):t.push((r.name||"{anonymous}")+"()"),r=r.caller;if(t=t.join("\n"))return t}}catch(e){o({message:"Resolve stack error: "+e.message})}return""}function a(e){var t;do{t=e,e=e.replace(location.protocol+"//"+location.host,"")}while(t!==e);return e}function o(e){var n=e.stack||"",r=e.message,o=(e.file||"").match(/^[a-z]+:/i),i=a(e.file||"");return(!o||"http:"===o[0]||"https:"===o[0])&&((!d||!d({message:r,stack:n,file:i}))&&(n.substr(0,r.length)===r&&(n=n.substr(r.length)),n=n.replace(/(^|\n)(\s*at)?\s+/g,"$1"),v.push({id:Number(new Date),url:location.href,meta:l||null,message:r,file:i,line:e.line||-1,column:e.column||-1,stack:a(n),number:e.number||0}),s||(s=setTimeout(t,m)),!0))}function i(e,t,n){if(e.addEventListener)e.addEventListener(t,n);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e["on"+t],a=n;r&&(a=function(){r.apply(this,arguments),n.apply(this,arguments)}),e["on"+t]=a}}function c(){b&&(b[y]=JSON.stringify(v),b=!1)}var s,l,u,f=3e3,m=1e3,p=/function\s*([\w\-$]+)?\s*\(([^\)]*)/i,g=!1,h="",d=!1,v=[],y="avitoErrorQueue",b=function(){var t="__localStorageTest"+Math.random(),n=e.localStorage,r=!1;try{n.setItem(t,t),r=n.getItem(t)===t,n.removeItem(t)}catch(e){}return!!r&&n}();b&&b[y]&&function(){var e=null;try{e=new Function("return "+b[y])()}catch(e){}delete b[y],e&&v.push.apply(v,e)}(),s=setTimeout(t,3e3),function(){var t=e.onerror;e.onerror=function(e,n,a,i,c){try{(n||a||c)&&o({message:e,file:n,line:a,column:i,stack:(c?c.stack||c.stacktrace:null)||arguments.stack||r(arguments),number:arguments.number})}catch(e){o({message:"Internal error on extract from arguments: "+e.message})}t&&t.apply(this,arguments)}}(),e.errorReporter={init:function(n,r){g||(g=!0,h=n,"function"==typeof(r=r||{}).filterStore&&(d=r.filterStore),"function"==typeof r.afterSendCallback&&(u=r.afterSendCallback),b&&!r.bfcache&&(i(e,"beforeunload",c),i(e,"unload",c)),r.meta&&(l=String(r.meta)),t())},report:function(e){if(e instanceof Error)try{return o({message:e.name+": "+e.message,file:e.fileName||e.sourceURL,line:e.line||e.lineNumber,column:e.columnNumber||e.colno,stack:e.stack||e.stacktrace||n(e)||r(arguments),number:e.number})}catch(e){o({message:"Internal error on extract error: "+e.message})}return!1},setMeta:function(e){l=String(e)}}}(this),function(){"use strict";function e(e){var t=e.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i);return t?t[1]:null}if("undefined"!=typeof errorReporter){var t=avito.isMobile?"mobile":"desktop";errorReporter.init("/js/logcollector",{meta:["pageId:"+(avito.pageId||"*"),"project:"+t],filterStore:function(t){var n=e(t.file);return!n||-1===n.indexOf("avito.")||-1!==t.message.indexOf("Script error")},afterSendCallback:function(e){if(avito.pageId){var n={p:"frontend."+t,c:{}};n.c["errors."+avito.pageId]=e.length,(new Image).src="https://www.avito.ru/stat/radar?data="+JSON.stringify(n)}}})}}();