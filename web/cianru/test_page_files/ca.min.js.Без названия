!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);window.CianAnalytics=new r.CianAnalytics},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(5),i=function(){function e(){this.initializeConfig();for(var e=window.ca,t=e.q,n=0;n<t.length;n++){var r=t[n];this.task(r[0],r[1])}window.ca=this.task.bind(this)}return e.prototype.initializeConfig=function(){var e=document.currentScript||document.querySelector("[data-analytics-api-url]");if(!e)throw new Error;this.service=new o.Service,this.service.setConfig(e.getAttribute("data-analytics-api-url")||"",e.getAttribute("data-profile-session-key")||"",r.getCookie("_CIAN_GK")||"")},e.prototype.task=function(e,t){this.service.config.apiUrl&&(this.service[e]?this.service[e](t):this.service.logger.addMessage('Error: event type - "'+e+'" not found',t))},e}();t.CianAnalytics=i},function(e,t,n){"use strict";function r(e){var t=document.cookie.split(";"),n="";return t.forEach(function(t){t.split("=")[0].trim()===e&&(n=t)}),n?n.split("=")[1]:null}function o(e,t){return t in e}function i(e){var t=u.calculateEnvironmentByHost(window.location.host),n={apiUrl:"https://sopr-api.cian.ru/",path:"old"===e?"collect":"site"};if("development"===t)return Object.assign(n,{apiUrl:"http://master.sopr.dev3.cian.ru/"});if("beta"===t){var r=a(window.location.host);return Object.assign(n,{apiUrl:"https://beta"+r+".sopr.stage.cian.ru/"})}return n}function a(e){var t=e.split(".").find(function(e){return e.indexOf("beta")>=0}),n=t?t.replace(/\D+/gi,""):1;return String(n)}function c(e,t){return e.reduce(function(e,n){return e[n]=t[n],e},{})}function s(e){var t=e.schemaVersion,n=e.event,r=e.ua,o=e.join_id,i=e.cid,a=e.ea,s=e.ec,u=e.el,g=e.ds,h=e.dl,v=e.modelVersion,b=e.referrer,m=e.rid,_=e.sc,O=e.products,w=e.partner,j=e.user,x=e.utm,S=e.page,P={schemaVersion:t,event:n,ua:r,join_id:o,cid:i,ea:a,ec:s,el:u,ds:g,dl:h,modelVersion:v,referrer:b,rid:m,sc:_};if(S&&Object.assign(P,{page:c(p,S)}),j&&Object.assign(P,{user:c(f,j)}),w&&Object.assign(P,{partner:c(l,w)}),O){var C=O.map(function(e){return c(d,e)});Object.assign(P,{products:C})}return x&&Object.assign(P,{utm:c(y,x)}),JSON.stringify(P)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(3);t.getCookie=r,t.isObjContainsKey=o,t.getSoprApi=i,t.getStageId=a;var p=["fromDeveloper","newObjects","listingType","sortType","pageNumber","breadCrumbs","customPageURL","dealType","objectType","offerID","offerPhone","offersQty","queryString","region","pageType","siteType"],f=["abGroup","balance","email","numberOfObjects","paymentType","type","userId","cianUserId","registrationDate"],l=["FB_city","FB_region","CriteoEmail","CriteoNewCustomer","CriteoProducts"],d=["id","cianId","parentId","ownerId","ownerCianId","dealType","objectType","category","name","position","auctionPosition","published","price","quantity","variant","brand","photosCount","hiddenBase","repres","owner","podSnos","nv"],y=["campaign","content","medium","source","term"];t.getFilteredJSONSopr=s},function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);r.__exportStar(n(2),t),r.__exportStar(n(3),t),r.__exportStar(n(4),t),r.__exportStar(n(5),t),r.__exportStar(n(6),t),r.__exportStar(n(7),t),r.__exportStar(n(8),t),r.__exportStar(n(9),t),r.__exportStar(n(10),t),r.__exportStar(n(11),t),r.__exportStar(n(12),t)},function(e,t){e.exports=n(4)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={domain:".cian.ru",path:"/",secure:!0};t.setCookie=function(e,t,n){var o,i=Object.assign({},r,n),a=i.expires;if(a)if("number"==typeof a){var c=new Date;o=new Date(c.setTime(c.getTime()+1e3*a)).toUTCString()}else a instanceof Date&&(o=a.toUTCString());document.cookie=e+"="+encodeURIComponent(t)+"; path="+i.path+("; domain="+i.domain)+(o?"; expires="+o:"")+(i.secure?"; secure":"")},t.deleteCookie=function(e,n){t.setCookie(e,"",Object.assign({},n,{expires:-1}))}},function(e,t,n){"use strict";function r(e){for(var t=0,n=o;t<n.length;t++){var r=n[t];if(r[1].test(e))return r[0]}return"unknown"}Object.defineProperty(t,"__esModule",{value:!0});var o=[["beta",/stage\.cian\.ru$/i],["development",/dev[2,3]?\.cian\.ru$/i],["local",/local(\.map)?\.cian\.ru$/i],["local",/^localhost(:\d+)?$/i],["production",/cian\.ru$/i]];t.calculateEnvironmentByHost=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCookies=function(e){for(var t={},n=e.split(/; */),r=0;r<n.length;r++){var o=n[r],i=o.indexOf("=");if(!(i<0)){var a=o.substr(0,i).trim(),c=o.substr(i+1,o.length).trim();'"'===c[0]&&(c=c.slice(1,-1)),a in t||(t[a]=decodeURIComponent(c))}}return t}},function(e,t,n){"use strict";function r(e){return!isNaN(e.getTime())}function o(e){return e<10?"0"+e:e.toString()}function i(e){return o(e.getHours())+":"+o(e.getMinutes())}function a(e,t){if(t=t&&r(t)?new Date(t.getTime()):new Date,t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth())return t.getDate()===e.getDate()?"сегодня":(t.setDate(t.getDate()-1),t.getDate()===e.getDate()?"вчера":(t.setDate(t.getDate()-1),t.getDate()===e.getDate()?"позавчера":void 0))}function c(e,t){var n=a(e);return t=t&&r(t)?new Date(t.getTime()):new Date,n?n+" "+i(e):t.getFullYear()===e.getFullYear()?e.getDate()+" "+s[e.getMonth()]+" "+i(e):e.getDate()+" "+s[e.getMonth()]+" "+e.getFullYear()}Object.defineProperty(t,"__esModule",{value:!0});var s=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"];t.isValidDate=r,t.leftPadZero=o,t.getTime=i,t.mapDayToString=a,t.getFormattedDate=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[{regex:/iPhone/i,type:"phone"},{regex:/iPod/i,type:"phone"},{regex:/iPad/i,type:"tablet"},{regex:/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,type:"phone"},{regex:/Android/i,type:"tablet"},{regex:/Windows Phone/i,type:"phone"},{regex:/(?=.*\bWindows\b)(?=.*\bARM\b)/i,type:"tablet"},{regex:/(BlackBerry|BB10)/i,type:"phone"},{regex:/Opera Mini/i,type:"phone"},{regex:/(CriOS|Chrome)(?=.*\bMobile\b)/i,type:"phone"},{regex:/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,type:"phone"}];t.identifyDeviceType=function(e){if(e)for(var t=0;t<r.length;t++){var n=r[t];if(n.regex.test(e))return n.type}return"desktop"}},function(e,t,n){"use strict";function r(e){for(var t=[[/^([^\.]+)\.micro\.cian\.tech$/,void 0],[/^(?:[^\.]+\.)?beta\d*\.stage\.cian\.ru$/,"python"],[/^[^\.]+\.([^\.]+)\.stage\.cian\.ru$/,void 0],[/^(?:[^\.]+\.)?[^\.]+\.dev\d*\.cian\.ru$/,"python"],[/^(?:[^\.]+\.)?beta\d*\.cian\.ru$/,"python"],[/^(?:[^\.]+\.)?cian\.ru$/,"python"]],n=0,r=t;n<r.length;n++){var o=r[n],i=o[0],a=o[1],c=i.exec(e);if(c)return a?a:c[1]}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeHost=r},function(e,t,n){"use strict";function r(e){var t="-"===e[0]?"-":"",n=e.split("."),r=n[0],o=n[1];return{fractional:o?o.replace(a,""):"",integer:r.replace(a,""),sign:t}}function o(e,t){void 0===t&&(t=",");var n=r(String(e)),o=n.fractional,a=n.integer,s=n.sign,u=i(a).match(c)||[],p=u.reverse().map(i).join(" ");return o?""+s+p+t+o:""+s+p}function i(e){return e.split("").reverse().join("")}Object.defineProperty(t,"__esModule",{value:!0});var a=/[^0-9]/g,c=/.{1,3}/g;t.parseNumber=r,t.numberToPrettyString=o},function(e,t,n){"use strict";function r(e,t){return e%10===1&&e%100!==11?t[0]:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?t[1]:t[2]}Object.defineProperty(t,"__esModule",{value:!0}),t.plural=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scrollTo=function(e){var t=e.containerElement.clientHeight,n=e.containerElement.scrollTop,r=e.targetElement.offsetTop,o=e.targetElement.scrollHeight;if(e.center)e.containerElement.scrollTop=r-t/2+o/2;else{var i=n+t,a=r+o;a>i?e.containerElement.scrollTop=a-t:r<n&&(e.containerElement.scrollTop=r)}}},function(e,t,n){"use strict";function r(e,t){var n=t?Object.assign({},c,t):c,r=i(n.fractionalLength),s=o(n.separator);if(e>=1e9){var u=r(e,1e9);return s(u,n.billionPostfix)}if(e>=1e6){var u=r(e,1e6);return s(String(u),n.millionPostfix)}if(e>=1e3){var u=r(e,1e3);return s(u,n.thousandPostfix)}var u=r(e);return a(Number(u),n.separator)}function o(e){return function(t,n){return a(Number(t),e)+" "+n}}function i(e){return function(t,n){if(!n)return t.toFixed(e);var r=t/n,o=String(r).split("."),i=o[1];if(i&&i.length>2&&Number(i.slice(-1))<5)return r.toFixed(e);if(i){var a=i.length>e?i.slice(0,e):i;return o[0]+"."+a}return String(r)}}function a(e,t){return"string"==typeof t?e.toString().replace(".",t):e.toString()}Object.defineProperty(t,"__esModule",{value:!0});var c={billionPostfix:"млрд.",fractionalLength:2,millionPostfix:"млн.",separator:void 0,thousandPostfix:"тыс."};t.shortenNumber=r},function(e,t,n){"use strict";function r(e){return"object"==typeof e&&!Array.isArray(e)&&(e.hasOwnProperty("style")&&e.hasOwnProperty("className"))}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(i,{style:{},className:""})}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){if("string"==typeof t)e.className+=0===e.className.length?t:" "+t;else if("object"==typeof t)if(r(t))e.className+=0===e.className.length?t.className:" "+t.className,Object.assign(e.style,t.style);else{if(Array.isArray(t))return t.reduce(i,e);Object.assign(e.style,t)}return e};t.mergeStyles=o}])},function(e,t,n){var r,o;(function(n){var i,a,c,s,u,p,f,l,d,y,g,h,v,b,m,_,O,w,j;!function(i){function a(e,t){return e!==c&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(n,r){return e[n]=t?t(n,r):r}}var c="object"==typeof n?n:"object"==typeof self?self:"object"==typeof this?this:{};r=[t],o=function(e){i(a(c,a(e)))}.apply(t,r),!(void 0!==o&&(e.exports=o))}(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};i=function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]]);return n},s=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},u=function(e,t){return function(n,r){t(n,r,e)}},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,c)}s((r=r.apply(e,t||[])).next())})},l=function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,c,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},d=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},y=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},g=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},h=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e},v=function(e){return this instanceof v?(this.v=e,this):new v(e)},b=function(e,t,n){function r(e){p[e]&&(u[e]=function(t){return new Promise(function(n,r){f.push([e,t,n,r])>1||o(e,t)})})}function o(e,t){try{i(p[e](t))}catch(e){s(f[0][3],e)}}function i(e){e.value instanceof v?Promise.resolve(e.value.v).then(a,c):s(f[0][2],e)}function a(e){o("next",e)}function c(e){o("throw",e)}function s(e,t){e(t),f.shift(),f.length&&o(f[0][0],f[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,p=n.apply(e,t||[]),f=[];return u={},r("next"),r("throw"),r("return"),u[Symbol.asyncIterator]=function(){return this},u},m=function(e){function t(t,o){n[t]=e[t]?function(n){return(r=!r)?{value:v(e[t](n)),done:"return"===t}:o?o(n):n}:o}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n},_=function(e){function t(t){r[t]=e[t]&&function(r){return new Promise(function(o,i){r=e[t](r),n(o,i,r.done,r.value)})}}function n(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=e[Symbol.asyncIterator];return o?o.call(e):(e="function"==typeof y?y(e):e[Symbol.iterator](),r={},t("next"),t("throw"),t("return"),r[Symbol.asyncIterator]=function(){return this},r)},O=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},j=function(e){return e&&e.__esModule?e:{default:e}},e("__extends",i),e("__assign",a),e("__rest",c),e("__decorate",s),e("__param",u),e("__metadata",p),e("__awaiter",f),e("__generator",l),e("__exportStar",d),e("__values",y),e("__read",g),e("__spread",h),e("__await",v),e("__asyncGenerator",b),e("__asyncDelegator",m),e("__asyncValues",_),e("__makeTemplateObject",O),e("__importStar",w),e("__importDefault",j)})}).call(t,function(){return this}())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(7),i=n(8),a=n(9),c=n(2),s=!1,u=function(){function e(){this.logger=new r.Logger}return e.prototype.user=function(e){this.config.setUser(e)},e.prototype.page=function(e){this.config.setPage(e)},e.prototype.partner=function(e){this.config.setPartner(e)},e.prototype.products=function(e){this.config.setProducts(e)},e.prototype.eventSite=function(e){var t=Object.assign({event:"oldevent"},e);this.send(new a.SoprEvent(t,this.config),"new")},e.prototype.pageviewSite=function(e){this.pageviewCreationEvent("new",e)},e.prototype.event=function(e){this.send(new a.SoprEvent(e,this.config),"old")},e.prototype.pageview=function(e){this.pageviewCreationEvent("old",e)},e.prototype.setConfig=function(e,t,n){this.config=new i.Config({cianGK:n,profileSessionKey:t,soprApiUrl:e})},e.prototype.log=function(){this.logger.start()},e.prototype.pageviewCreationEvent=function(e,t){t&&this.config.update(t.user,t.partner,t.page,t.products);var n=Object.assign({category:"page",action:"newpage",label:"open",event:"newpage",value:""},t);this.send(new a.SoprEvent(n,this.config,{category:"page",action:"newpage",label:"open",value:""}),e)},e.prototype.send=function(e,t){function n(){if(!s){s=!0;var e=r.dataLayer.push;r.dataLayer.push=function(t){if(t&&"object"==typeof t&&("fl_push_profile"===t.event&&t.profile_id&&o.PushNotificationsAPI(JSON.stringify({profileId:t.profile_id})),"system-push-subscribed"===t.event&&r.ca("event",{name:"oldevent",category:"Push",action:"Subscribe",label:""}),"system-push-denied"===t.event&&r.ca("event",{name:"oldevent",category:"Push",action:"Decline",label:""}),"string"==typeof t.category&&"authorization"===t.category.toLowerCase())){var n=r.dataLayer.find(function(e){return"object"==typeof e&&"fl_push_profile"===e.event});n&&n.profile_id&&o.PushNotificationsAPI(JSON.stringify({profileId:n.profile_id}))}e.call(r.dataLayer,t)}}}var r=window,i=c.getSoprApi(t),a={apiUrl:i.apiUrl,path:i.path,dataToSopr:"old"===t?e.getSoprParams():e.getSoprJsonParams(),contentType:"old"===t?"application/x-www-form-urlencoded":"application/json"};o.SoprAPI(a).catch(function(){console.warn("Error while sending metrics to SOPR")}),r.dataLayer?(r.dataLayer.push(e.getDataLayerParams()),n()):(r.dataLayer=[{"gtm.start":(new Date).getTime(),event:"gtm.js"},e.getDataLayerParams()],n()),this.logger.addEvent(e)},e}();t.Service=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.isActive=!1,this.logStack=[]}return e.prototype.addEvent=function(e){this.logStack.push(e),this.isActive&&console.log("CIAN analytics send",e)},e.prototype.addMessage=function(e,t){console.warn(e,t)},e.prototype.start=function(){this.isActive=!0,this.logStack.forEach(function(e){console.log('CA "'+e.sopr.t+'": ',e)})},e}();t.Logger=n},function(e,t){"use strict";function n(e){var t=new XMLHttpRequest,n=e.apiUrl,r=e.dataToSopr,o=e.contentType,i=e.path;return new Promise(function(e,a){t.onreadystatechange=function(){4===t.readyState&&(204===t.status?e():a())},t.withCredentials=!0,t.open("POST",""+n+i+"/"),t.setRequestHeader("Content-Type",o),t.send(r)})}function r(e){var t="https://api.cian.ru/push-notifications/";if("undefined"!=typeof document){var n=document.location.host,r=o.exec(n),a=i.exec(n);r?t="http://master.push-notifications.dev"+r[1]+".cian.ru/public/":a&&(t="http://beta"+a[1]+".push-notifications.stage.cian.ru/public/")}var c=new XMLHttpRequest;return new Promise(function(n,r){c.onreadystatechange=function(){4===c.readyState&&(200===c.status?n():r())},c.withCredentials=!0,c.open("POST",t+"v1/save-profile/"),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.SoprAPI=n;var o=/dev(\d)/,i=/beta(\d)/;t.PushNotificationsAPI=r},function(e,t,n){"use strict";function r(e){var t=o.isObjContainsKey(e,"userID")?e.userID:e.userId;return t?String(t):null}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=function(){function e(e){this.apiUrl=e.soprApiUrl,this.profileSessionKey=e.profileSessionKey,this.cianGK=e.cianGK}return e.prototype.setUser=function(e){this.user=e},e.prototype.setPage=function(e){this.page=e},e.prototype.setPartner=function(e){this.partner=e},e.prototype.setProducts=function(e){this.products=e},e.prototype.update=function(e,t,n,r){this.user=e||this.user,this.partner=t||this.partner,this.page=n||this.page,this.products=r||this.products},e.prototype.getSoprData=function(e){var t=this.getUtmData(),n={};Object.keys(t).forEach(function(e){var r=e.replace("utm_","");Object.assign(n,(o={},o[r]=t[e],o));var o});var i={t:e,v:"1",cid:this.cianGK||"noid",dl:encodeURIComponent(document.location.href),rid:this.profileSessionKey,ua:encodeURIComponent(navigator.userAgent),utm:n},a=this.user&&r(this.user);a&&Object.assign(i,{uid:a});var c=this.page&&o.isObjContainsKey(this.page,"offerVAS")?this.page.offerVAS:void 0;this.page&&(i.pt=this.page.pageType.toLowerCase(),i.ds=this.page.siteType,i.deal_type=this.page.dealType,i.object_type=this.page.objectType,i.vas=c,i.oid=this.page.offerID),this.collectUtm(i);for(var s in i)!i[s]&&delete i[s];return i},e.prototype.collectUtm=function(e){var t=this.getUtmData();t.utm_campaign&&(e.ci=t.utm_campaign,e.cs=t.utm_source,e.cm=t.utm_medium,e.ck=t.utm_term,e.cc=t.utm_content)},e.prototype.getUtmData=function(){var e=location.search.replace("?","").split("&"),t={utm_campaign:void 0,utm_content:void 0,utm_term:void 0,utm_medium:void 0,utm_source:void 0};return e.forEach(function(e){var n=e.split("=");n[0]in t&&(t[n[0]]=n[1])}),t},e}();t.Config=i},function(e,t,n){"use strict";var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]]);return n};Object.defineProperty(t,"__esModule",{value:!0});var o=n(10),i=n(2),a=function(){function e(e,t,n){this.data=e,this.data.join_id=this.getGUID(),this.custom=n,this.sopr=t.getSoprData("event")}return e.prototype.getSoprParams=function(){var e=[],t=this.sopr,n=(t.utm,r(t,["utm"]));for(var i in n)e.push(i+"="+encodeURIComponent(String(n[i])));var a=this.data;this.custom&&(a=o(this.custom,this.data));for(var i in a){var c=a[i];"object"==typeof c&&(c=JSON.stringify(c)),e.push(this.getRightSoprKey(i)+"="+encodeURIComponent(c))}return e.push("referrer="+encodeURIComponent(document.referrer)),this.query=e,e.join("&")},e.prototype.getSoprJsonParams=function(){var e=this,t=this.data,n={};return this.custom&&Object.assign(this.custom,this.data),Object.keys(t).forEach(function(r){Object.assign(n,(o={},o[e.getRightSoprKey(r)]=t[r],o));var o}),Object.assign(n,this.sopr,{referrer:document.referrer}),i.getFilteredJSONSopr(n)},e.prototype.getDataLayerParams=function(){var e=this,t=Object.keys(this.data).reduce(function(t,n){return t[e.replaceEventKeys(n)]=e.data[n],t},{});return t},e.prototype.getRightSoprKey=function(e){var t={category:"ec",eventCategory:"ec",action:"ea",eventAction:"ea",label:"el",eventLabel:"el",value:"ev",eventValue:"ev",hitType:"t",searchConditions:"sc",searchResults:"sr"};return t[e]?t[e]:e},e.prototype.replaceEventKeys=function(e){var t={name:"event",category:"eventCategory",label:"eventLabel",action:"eventAction"};return t[e]||e},e.prototype.getGUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},e}();t.SoprEvent=a},function(e,t){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=r()?Object.assign:function(e,t){for(var r,c,s=n(e),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var p in r)i.call(r,p)&&(s[p]=r[p]);if(o){c=o(r);for(var f=0;f<c.length;f++)a.call(r,c[f])&&(s[c[f]]=r[c[f]])}}return s}}]);
//# sourceMappingURL=ca.min.js.map