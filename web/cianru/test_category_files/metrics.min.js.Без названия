!function(n){function e(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return n[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=n,e.c=t,e.p="/assets/",e(0)}([function(n,e){function t(n){return n&&(window.PerformanceMeasure&&n instanceof window.PerformanceMeasure||"measure"===n.entryType)}function r(n){return[n.connectEnd,n.connectStart,n.decodedBodySize,n.domainLookupEnd,n.domainLookupStart,n.duration,n.encodedBodySize,n.entryType,n.fetchStart,n.initiatorType,n.name,n.redirectEnd,n.redirectStart,n.requestStart,n.responseEnd,n.responseStart,n.secureConnectionStart,n.startTime,n.transferSize,n.workerStart].join(":")}function o(n){return T.indexOf(r(n))===-1}function i(n){T.push(r(n))}function a(){return window.performance?window.performance.timing.fetchStart:window.__cianMetrics__.loadingTime}function d(n,e){var t=n[e];return void 0===t?null:t}function c(){return{cookieEnabled:d(navigator,"cookieEnabled"),hardwareConcurrency:d(navigator,"hardwareConcurrency"),platform:d(navigator,"platform"),userAgent:d(navigator,"userAgent"),vendor:d(navigator,"vendor")}}function s(){return{width:d(screen,"width"),height:d(screen,"height"),orientationType:screen.orientation?d(screen.orientation,"type"):null,colorDepth:d(screen,"colorDepth")}}function u(n,e){function t(t){return t in n&&0!==n[t]?e?null===r||0===r?null:n[t]-r:n[t]:null}var r=d(n,"fetchStart");return{connectEnd:t("connectEnd"),connectStart:t("connectStart"),domainLookupEnd:t("domainLookupEnd"),domainLookupStart:t("domainLookupStart"),domComplete:t("domComplete"),domContentLoadedEventEnd:t("domContentLoadedEventEnd"),domContentLoadedEventStart:t("domContentLoadedEventStart"),domInteractive:t("domInteractive"),domLoading:t("domLoading"),loadEventEnd:t("loadEventEnd"),loadEventStart:t("loadEventStart"),navigationStart:t("navigationStart"),fetchStart:r>0?e?0:r:null,redirectEnd:t("redirectEnd"),redirectStart:t("redirectStart"),requestStart:t("requestStart"),responseEnd:t("responseEnd"),responseStart:t("responseStart"),secureConnectionStart:t("secureConnectionStart"),unloadEventEnd:t("unloadEventEnd"),unloadEventStart:t("unloadEventStart")}}function m(n){return{redirectCount:d(n,"redirectCount"),type:d(n,"type")}}function p(n){return{connectEnd:d(n,"connectEnd"),connectStart:d(n,"connectStart"),decodedBodySize:d(n,"decodedBodySize"),domainLookupEnd:d(n,"domainLookupEnd"),domainLookupStart:d(n,"domainLookupStart"),duration:d(n,"duration"),encodedBodySize:d(n,"encodedBodySize"),entryType:d(n,"entryType"),fetchStart:d(n,"fetchStart"),initiatorType:d(n,"initiatorType"),name:d(n,"name"),redirectEnd:d(n,"redirectEnd"),redirectStart:d(n,"redirectStart"),requestStart:d(n,"requestStart"),responseEnd:d(n,"responseEnd"),responseStart:d(n,"responseStart"),secureConnectionStart:d(n,"secureConnectionStart"),startTime:d(n,"startTime"),transferSize:d(n,"transferSize"),workerStart:d(n,"workerStart")}}function f(){return{timing:u({}),absoluteTiming:u({}),customTiming:l({}),entryByDomain:w([]),navigation:m({}),entries:[]}}function l(n){function e(n,e){return null!==n&&null!==e?n-e:null}return{domainLookup:e(d(n,"domainLookupEnd"),d(n,"domainLookupStart")),backend:e(d(n,"responseStart"),d(n,"requestStart")),domInteractive:e(d(n,"domInteractive"),d(n,"domLoading")),domContentLoaded:e(d(n,"domContentLoadedEventStart"),d(n,"domLoading")),domComplete:e(d(n,"domComplete"),d(n,"domLoading")),load:e(d(n,"loadEventStart"),d(n,"domLoading"))}}function w(){return{min:{},max:{},avg:{},count:{}}}function S(){if(!window.performance)return f();var n=u(performance.timing||{},!0),e=u(performance.timing||{},!1),r=l(performance.timing),o=w(performance.getEntries?performance.getEntries():[]),a=m(performance.navigation||{}),d=(performance.getEntries?performance.getEntries():[]).filter(t);return d.forEach(i),{timing:n,absoluteTiming:e,customTiming:r,entryByDomain:o,navigation:a,entries:d.map(p)}}function g(n,e){if("undefined"!==window.performance){e=e?/\/$/.test(e)?e:e+"/":"no-profile-session-key/";var r=/\/$/.test(n)?n+e:n+"/"+e,a=(performance.getEntries?performance.getEntries():[]).filter(t).filter(o);a.length>0&&(a.forEach(i),_(r,a.map(p))),setTimeout(function(){g(n,e)},1e4)}}function v(n){var e=void 0,t=void 0;return window.chrome&&window.chrome.loadTimes?e=1e3*window.chrome.loadTimes().firstPaintTime:window.performance&&window.performance.timing&&"number"==typeof window.performance.timing.msFirstPaint&&(e=window.performance.timing.msFirstPaint),0===e&&(e=void 0),null!=n&&null!=e&&(t=e-n),{firstPaint:e,firstPaintTime:t}}function E(n,e,t){var r=S(),o=v(r.absoluteTiming.domLoading),i=window.__cianMetrics__.appRenders;return i.firstPaint=o.firstPaint,i.firstPaintTime=o.firstPaintTime,{url:location.href,profileSessionKey:n,clientTime:a(),appRenders:i,versions:window.__cianMetrics__.versions,navigator:c(),screen:s(),performance:r,websiteType:e,pageType:t}}function _(n,e){var t=new XMLHttpRequest;t.open("POST",n,!0),t.withCredentials=!0,t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify(e))}function y(n,e,t,r){setTimeout(function(){_(n,E(e,t,r))},1e3),setTimeout(function(){g(n,e)},1e4)}function h(){if(L||k){var n=document.currentScript||document.querySelector("[data-metrics-api]");if(!n)throw new Error;var e=n.getAttribute("data-metrics-api"),t=n.getAttribute("data-profile-session-key")||"",r=n.getAttribute("data-website-type")||"Unknown",o=n.getAttribute("data-page-type")||"Unknown";e&&(window.__cianMetrics__=window.__cianMetrics__||{},window.__cianMetrics__.appRenders=window.__cianMetrics__.appRenders||{},window.__cianMetrics__.versions=window.__cianMetrics__.versions||{},window.__cianMetrics__.loadingTime=Date.now(),"complete"===document.readyState?y(e,t,r,o):window.addEventListener("load",y.bind(null,e,t,r,o)))}}var T=[],L=window.location.hostname.indexOf("cian.ru")>=0&&window.location.hostname.indexOf("local.cian.ru")<0&&window.location.hostname.indexOf("dev.cian.ru")<0&&window.location.hostname.indexOf("stage.cian.ru")<0,k=window.location.hash.indexOf("force-metrics")>=0;h()}]);
//# sourceMappingURL=metrics.min.js.map